<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Alfonso Garcia-Caro">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,300,600,700|Roboto+Mono' rel='stylesheet' type='text/css'>
    <link href="//fable.io/content/custom.css" rel='stylesheet' type='text/css'>
    <script src="//fable.io/content/tips.js"></script>
    <link rel="stylesheet" type="text/css" href="//fable.io/content/snippets.css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <!--<script language="javascript" type="text/javascript">
      function init() {
          try {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
          } catch(e) { /* For local development only */ }
      }
      window.addEventListener("load", init, false);
    </script>-->

  <title>Fable Pong - F# |> BABEL</title>

  <meta name="description" content="Two player Pong clone using HTML5 canvas">

</head>
<body>

  <div class="fable-navbar">
  <div class="container">
  <nav class="navbar navbar-default">
    <div class="navbar-wrapper">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="//fable.io">Fable</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class=""><a href="//fable.io">home</a></li>
          <li class="active"><a href="//fable.io/samples.html">samples</a></li>
          <li class=""><a href="//fable.io/docs.html">docs</a></li>
          <li class=""><a href="//fable.io/blog.html">blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
  </div>
  </div>

  <div class="fable-content-wrapper">

<div class="fable-heading">
<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Fable Pong</h1>
      <p>Two player Pong clone using HTML5 canvas</p>
    </div>
  </div>
</div>
</div>

<div class="container fable-content">
  <div class="row">
    <div class="col-md-1 col-lg-2"></div>
    <div class="col-sm-12 col-md-10 col-lg-8">
      <p>This demo shows a Fable implementation of Pong, which is also part of the <a href="https://sergeytihon.wordpress.com/2016/10/23/f-advent-calendar-in-english-2016/">F# Advent Calendar in English 2016</a>.
You can find the <a href="https://github.com/fsprojects/Fable/blob/master/samples/browser/pong/pong.fsx">full source code on GitHub</a> and learn more in <a href="http://oopbase.de/posts/implementing-pong-in-a-functional-manner-with-fable.html">this post</a>.</p>
    </div>
    <div class="col-md-1 col-lg-2"></div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="app-container" style="">

      <h3>Fable Pong</h3>
      <p>Left Paddle: w => up; s => down | Right Paddle: Arrow up => up; Arrow down => down<p>
      <canvas id="canvas" width="800" height="600"></canvas>
      <script src="out/bundle.js"></script>

      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-1 col-lg-2"></div>
    <div class="col-sm-12 col-md-10 col-lg-8">
      <h2><a name="Defining-the-model" class="anchor" href="#Defining-the-model">Defining the model</a></h2>
<p>When thinking about the Pong game, there are basically three types of models:</p>
<ol>
<li><strong>Paddles:</strong> The paddles have got a position and a specific size.</li>
<li><strong>Ball:</strong> The ball has got a position and a size as well. But it has also got speed and an angle.</li>
<li><strong>Game status:</strong> Some kind of storage containing information about the current score.</li>
</ol>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 13)" onmouseover="showTip(event, 'fs3', 13)" class="t">PongElement</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs9', 14)" onmouseover="showTip(event, 'fs9', 14)" class="i">x</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 15)" onmouseover="showTip(event, 'fs3', 15)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs10', 16)" onmouseover="showTip(event, 'fs10', 16)" class="i">y</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 17)" onmouseover="showTip(event, 'fs3', 17)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs3', 18)" onmouseover="showTip(event, 'fs3', 18)" class="i">width</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 19)" onmouseover="showTip(event, 'fs3', 19)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs3', 20)" onmouseover="showTip(event, 'fs3', 20)" class="i">height</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 21)" onmouseover="showTip(event, 'fs3', 21)" class="t">float</span>;
}

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 22)" onmouseover="showTip(event, 'fs3', 22)" class="t">BallElement</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs3', 23)" onmouseover="showTip(event, 'fs3', 23)" class="i">element</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 24)" onmouseover="showTip(event, 'fs3', 24)" class="t">PongElement</span>;
    <span onmouseout="hideTip(event, 'fs3', 25)" onmouseover="showTip(event, 'fs3', 25)" class="i">speed</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 26)" onmouseover="showTip(event, 'fs3', 26)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs3', 27)" onmouseover="showTip(event, 'fs3', 27)" class="i">angle</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 28)" onmouseover="showTip(event, 'fs3', 28)" class="t">float</span>;
}

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 29)" onmouseover="showTip(event, 'fs3', 29)" class="t">GameStatus</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs3', 30)" onmouseover="showTip(event, 'fs3', 30)" class="i">scoreLeft</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 31)" onmouseover="showTip(event, 'fs3', 31)" class="t">int</span>;
    <span onmouseout="hideTip(event, 'fs3', 32)" onmouseover="showTip(event, 'fs3', 32)" class="i">scoreRight</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 33)" onmouseover="showTip(event, 'fs3', 33)" class="t">int</span>;
    <span onmouseout="hideTip(event, 'fs3', 34)" onmouseover="showTip(event, 'fs3', 34)" class="i">active</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 35)" onmouseover="showTip(event, 'fs3', 35)" class="t">bool</span>;
}
</code></pre></td>
</tr>
</table>
<h2><a name="Controlling-the-paddles" class="anchor" href="#Controlling-the-paddles">Controlling the paddles</a></h2>
<p>To control a paddle there are only two functions necessary. A canMove-function, to indicate whether a paddle can move in a certain direction, and an actual move-function to move the paddle.
The parameter direction is a tuple (int * int). When the first parameter of the tuple is set to 1, we want the paddle to move up. When the second parameter of the tuple is set to 1, we want the paddle to move down. By using pattern matching we can check which value of the tuple is set to 1. Since every object is immutable, we either return a copy of the current paddle with its new Y-position (line 10 and 11) or simply return the input-paddle if no movement is allowed.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 36)" onmouseover="showTip(event, 'fs3', 36)" class="f">canMove</span> <span onmouseout="hideTip(event, 'fs3', 37)" onmouseover="showTip(event, 'fs3', 37)" class="i">direction</span> <span onmouseout="hideTip(event, 'fs3', 38)" onmouseover="showTip(event, 'fs3', 38)" class="i">paddle</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs3', 39)" onmouseover="showTip(event, 'fs3', 39)" class="i">direction</span> <span class="k">with</span>
    | (<span class="n">1</span>, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 40)" onmouseover="showTip(event, 'fs3', 40)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 41)" onmouseover="showTip(event, 'fs10', 41)" class="i">y</span> <span class="o">&gt;</span> <span class="n">0.</span>
    | (_, <span class="n">1</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 42)" onmouseover="showTip(event, 'fs3', 42)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 43)" onmouseover="showTip(event, 'fs10', 43)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 44)" onmouseover="showTip(event, 'fs3', 44)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 45)" onmouseover="showTip(event, 'fs11', 45)" class="i">height</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs7', 46)" onmouseover="showTip(event, 'fs7', 46)" class="i">h</span>
    | _ <span class="k">-&gt;</span> <span class="k">false</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 47)" onmouseover="showTip(event, 'fs3', 47)" class="f">move</span> <span onmouseout="hideTip(event, 'fs3', 48)" onmouseover="showTip(event, 'fs3', 48)" class="i">direction</span> <span onmouseout="hideTip(event, 'fs3', 49)" onmouseover="showTip(event, 'fs3', 49)" class="i">paddle</span> <span class="o">=</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 50)" onmouseover="showTip(event, 'fs3', 50)" class="i">paddle</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 51)" onmouseover="showTip(event, 'fs3', 51)" class="f">canMove</span> <span onmouseout="hideTip(event, 'fs3', 52)" onmouseover="showTip(event, 'fs3', 52)" class="i">direction</span> <span class="k">then</span>
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs3', 53)" onmouseover="showTip(event, 'fs3', 53)" class="i">direction</span> <span class="k">with</span>
        | (<span class="n">1</span>, _) <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs3', 54)" onmouseover="showTip(event, 'fs3', 54)" class="i">paddle</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs10', 55)" onmouseover="showTip(event, 'fs10', 55)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 56)" onmouseover="showTip(event, 'fs3', 56)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 57)" onmouseover="showTip(event, 'fs10', 57)" class="i">y</span> <span class="o">-</span> <span class="n">5.</span> }
        | (_, <span class="n">1</span>) <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs3', 58)" onmouseover="showTip(event, 'fs3', 58)" class="i">paddle</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs10', 59)" onmouseover="showTip(event, 'fs10', 59)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 60)" onmouseover="showTip(event, 'fs3', 60)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 61)" onmouseover="showTip(event, 'fs10', 61)" class="i">y</span> <span class="o">+</span> <span class="n">5.</span> }
        | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 62)" onmouseover="showTip(event, 'fs3', 62)" class="i">paddle</span>
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs3', 63)" onmouseover="showTip(event, 'fs3', 63)" class="i">paddle</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Collision-detection" class="anchor" href="#Collision-detection">Collision detection</a></h2>
<p>This discriminated union describes the whole collision system of the game: There can be no collision (None), the Top or Bottom of the canvas may be hit, the Left or Right part of the canvas may be hit (so a player scored) or finally a paddle was hit (LeftPaddle &amp; RightPaddle). The following function takes the paddles and the ball as input parameters and returns the found type of collision.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 64)" onmouseover="showTip(event, 'fs3', 64)" class="t">Collision</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs3', 65)" onmouseover="showTip(event, 'fs3', 65)" class="p">None</span>
    | <span onmouseout="hideTip(event, 'fs3', 66)" onmouseover="showTip(event, 'fs3', 66)" class="p">Top</span>
    | <span onmouseout="hideTip(event, 'fs3', 67)" onmouseover="showTip(event, 'fs3', 67)" class="p">Bottom</span>
    | <span onmouseout="hideTip(event, 'fs3', 68)" onmouseover="showTip(event, 'fs3', 68)" class="p">Left</span>
    | <span onmouseout="hideTip(event, 'fs3', 69)" onmouseover="showTip(event, 'fs3', 69)" class="p">Right</span>
    | <span onmouseout="hideTip(event, 'fs3', 70)" onmouseover="showTip(event, 'fs3', 70)" class="p">LeftPaddle</span>
    | <span onmouseout="hideTip(event, 'fs3', 71)" onmouseover="showTip(event, 'fs3', 71)" class="p">RightPaddle</span>
</code></pre></td>
</tr>
</table>
<p>With this function, implementing a final collision-function to determine the new angle of the ball is straight forward again. (Thanks to pattern matching)</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 72)" onmouseover="showTip(event, 'fs3', 72)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs3', 73)" onmouseover="showTip(event, 'fs3', 73)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 74)" onmouseover="showTip(event, 'fs3', 74)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 75)" onmouseover="showTip(event, 'fs3', 75)" class="i">ball</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 76)" onmouseover="showTip(event, 'fs3', 76)" class="i">hitTop</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 77)" onmouseover="showTip(event, 'fs3', 77)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 78)" onmouseover="showTip(event, 'fs12', 78)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 79)" onmouseover="showTip(event, 'fs10', 79)" class="i">y</span> <span class="o">&lt;=</span> <span class="n">0.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 80)" onmouseover="showTip(event, 'fs3', 80)" class="i">hitBottom</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 81)" onmouseover="showTip(event, 'fs3', 81)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 82)" onmouseover="showTip(event, 'fs12', 82)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 83)" onmouseover="showTip(event, 'fs10', 83)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 84)" onmouseover="showTip(event, 'fs3', 84)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 85)" onmouseover="showTip(event, 'fs12', 85)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 86)" onmouseover="showTip(event, 'fs11', 86)" class="i">height</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 87)" onmouseover="showTip(event, 'fs7', 87)" class="i">h</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 88)" onmouseover="showTip(event, 'fs3', 88)" class="i">hitLeft</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 89)" onmouseover="showTip(event, 'fs3', 89)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 90)" onmouseover="showTip(event, 'fs12', 90)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 91)" onmouseover="showTip(event, 'fs9', 91)" class="i">x</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 92)" onmouseover="showTip(event, 'fs3', 92)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 93)" onmouseover="showTip(event, 'fs9', 93)" class="i">x</span> <span class="o">&amp;&amp;</span> ((<span onmouseout="hideTip(event, 'fs3', 94)" onmouseover="showTip(event, 'fs3', 94)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 95)" onmouseover="showTip(event, 'fs12', 95)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 96)" onmouseover="showTip(event, 'fs10', 96)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 97)" onmouseover="showTip(event, 'fs3', 97)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 98)" onmouseover="showTip(event, 'fs10', 98)" class="i">y</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 99)" onmouseover="showTip(event, 'fs3', 99)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 100)" onmouseover="showTip(event, 'fs12', 100)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 101)" onmouseover="showTip(event, 'fs10', 101)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 102)" onmouseover="showTip(event, 'fs3', 102)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 103)" onmouseover="showTip(event, 'fs10', 103)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 104)" onmouseover="showTip(event, 'fs3', 104)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 105)" onmouseover="showTip(event, 'fs11', 105)" class="i">height</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 106)" onmouseover="showTip(event, 'fs3', 106)" class="f">not</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 107)" onmouseover="showTip(event, 'fs3', 107)" class="i">hitRight</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 108)" onmouseover="showTip(event, 'fs3', 108)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 109)" onmouseover="showTip(event, 'fs12', 109)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 110)" onmouseover="showTip(event, 'fs9', 110)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 111)" onmouseover="showTip(event, 'fs3', 111)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 112)" onmouseover="showTip(event, 'fs12', 112)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 113)" onmouseover="showTip(event, 'fs13', 113)" class="i">width</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 114)" onmouseover="showTip(event, 'fs3', 114)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 115)" onmouseover="showTip(event, 'fs9', 115)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 116)" onmouseover="showTip(event, 'fs3', 116)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 117)" onmouseover="showTip(event, 'fs13', 117)" class="i">width</span> <span class="o">&amp;&amp;</span> ((<span onmouseout="hideTip(event, 'fs3', 118)" onmouseover="showTip(event, 'fs3', 118)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 119)" onmouseover="showTip(event, 'fs12', 119)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 120)" onmouseover="showTip(event, 'fs10', 120)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 121)" onmouseover="showTip(event, 'fs3', 121)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 122)" onmouseover="showTip(event, 'fs10', 122)" class="i">y</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 123)" onmouseover="showTip(event, 'fs3', 123)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 124)" onmouseover="showTip(event, 'fs12', 124)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 125)" onmouseover="showTip(event, 'fs10', 125)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 126)" onmouseover="showTip(event, 'fs3', 126)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 127)" onmouseover="showTip(event, 'fs10', 127)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 128)" onmouseover="showTip(event, 'fs3', 128)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 129)" onmouseover="showTip(event, 'fs11', 129)" class="i">height</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 130)" onmouseover="showTip(event, 'fs3', 130)" class="f">not</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 131)" onmouseover="showTip(event, 'fs3', 131)" class="i">hitLeftPaddle</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 132)" onmouseover="showTip(event, 'fs3', 132)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 133)" onmouseover="showTip(event, 'fs12', 133)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 134)" onmouseover="showTip(event, 'fs9', 134)" class="i">x</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 135)" onmouseover="showTip(event, 'fs3', 135)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 136)" onmouseover="showTip(event, 'fs9', 136)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 137)" onmouseover="showTip(event, 'fs3', 137)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 138)" onmouseover="showTip(event, 'fs13', 138)" class="i">width</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 139)" onmouseover="showTip(event, 'fs3', 139)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 140)" onmouseover="showTip(event, 'fs12', 140)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 141)" onmouseover="showTip(event, 'fs10', 141)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 142)" onmouseover="showTip(event, 'fs3', 142)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 143)" onmouseover="showTip(event, 'fs10', 143)" class="i">y</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 144)" onmouseover="showTip(event, 'fs3', 144)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 145)" onmouseover="showTip(event, 'fs12', 145)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 146)" onmouseover="showTip(event, 'fs10', 146)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 147)" onmouseover="showTip(event, 'fs3', 147)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 148)" onmouseover="showTip(event, 'fs10', 148)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 149)" onmouseover="showTip(event, 'fs3', 149)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 150)" onmouseover="showTip(event, 'fs11', 150)" class="i">height</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 151)" onmouseover="showTip(event, 'fs3', 151)" class="i">hitRightPaddle</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 152)" onmouseover="showTip(event, 'fs3', 152)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 153)" onmouseover="showTip(event, 'fs12', 153)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 154)" onmouseover="showTip(event, 'fs9', 154)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 155)" onmouseover="showTip(event, 'fs3', 155)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 156)" onmouseover="showTip(event, 'fs12', 156)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 157)" onmouseover="showTip(event, 'fs13', 157)" class="i">width</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 158)" onmouseover="showTip(event, 'fs3', 158)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 159)" onmouseover="showTip(event, 'fs9', 159)" class="i">x</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 160)" onmouseover="showTip(event, 'fs3', 160)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 161)" onmouseover="showTip(event, 'fs12', 161)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 162)" onmouseover="showTip(event, 'fs10', 162)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 163)" onmouseover="showTip(event, 'fs3', 163)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 164)" onmouseover="showTip(event, 'fs10', 164)" class="i">y</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 165)" onmouseover="showTip(event, 'fs3', 165)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 166)" onmouseover="showTip(event, 'fs12', 166)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 167)" onmouseover="showTip(event, 'fs10', 167)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs3', 168)" onmouseover="showTip(event, 'fs3', 168)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 169)" onmouseover="showTip(event, 'fs10', 169)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 170)" onmouseover="showTip(event, 'fs3', 170)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 171)" onmouseover="showTip(event, 'fs11', 171)" class="i">height</span>
    <span class="k">match</span> (<span onmouseout="hideTip(event, 'fs3', 172)" onmouseover="showTip(event, 'fs3', 172)" class="i">hitTop</span>, <span onmouseout="hideTip(event, 'fs3', 173)" onmouseover="showTip(event, 'fs3', 173)" class="i">hitBottom</span>, <span onmouseout="hideTip(event, 'fs3', 174)" onmouseover="showTip(event, 'fs3', 174)" class="i">hitLeft</span>, <span onmouseout="hideTip(event, 'fs3', 175)" onmouseover="showTip(event, 'fs3', 175)" class="i">hitRight</span>, <span onmouseout="hideTip(event, 'fs3', 176)" onmouseover="showTip(event, 'fs3', 176)" class="i">hitLeftPaddle</span>, <span onmouseout="hideTip(event, 'fs3', 177)" onmouseover="showTip(event, 'fs3', 177)" class="i">hitRightPaddle</span>) <span class="k">with</span>
    | (<span class="k">true</span>, _, _, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 178)" onmouseover="showTip(event, 'fs3', 178)" class="p">Top</span>
    | (_, <span class="k">true</span>, _, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 179)" onmouseover="showTip(event, 'fs3', 179)" class="p">Bottom</span>
    | (_, _, <span class="k">true</span>, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 180)" onmouseover="showTip(event, 'fs3', 180)" class="p">Left</span>
    | (_, _, _, <span class="k">true</span>, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 181)" onmouseover="showTip(event, 'fs3', 181)" class="p">Right</span>
    | (_, _, _, _, <span class="k">true</span>, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 182)" onmouseover="showTip(event, 'fs3', 182)" class="p">LeftPaddle</span>
    | (_, _, _, _, _, <span class="k">true</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 183)" onmouseover="showTip(event, 'fs3', 183)" class="p">RightPaddle</span>
    | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 184)" onmouseover="showTip(event, 'fs3', 184)" class="p">None</span>
</code></pre></td>
</tr>
</table>
<p>When hitting either the top or the bottom of the canvas, we negate the value of the angle (angle of incidence is equal to the angle of reflection). When hitting the left or right part of the canvas, we simply keep the input angle, since evaluating the score isn’t done here. To actually calculate the angle when a paddle is hit, we use yet another function.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 185)" onmouseover="showTip(event, 'fs3', 185)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs3', 186)" onmouseover="showTip(event, 'fs3', 186)" class="i">paddle</span> <span onmouseout="hideTip(event, 'fs3', 187)" onmouseover="showTip(event, 'fs3', 187)" class="i">hitRightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 188)" onmouseover="showTip(event, 'fs3', 188)" class="f">determineAngle</span> <span onmouseout="hideTip(event, 'fs3', 189)" onmouseover="showTip(event, 'fs3', 189)" class="i">ball</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 190)" onmouseover="showTip(event, 'fs3', 190)" class="i">relativeIntersectY</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs3', 191)" onmouseover="showTip(event, 'fs3', 191)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 192)" onmouseover="showTip(event, 'fs10', 192)" class="i">y</span> <span class="o">+</span> (<span onmouseout="hideTip(event, 'fs3', 193)" onmouseover="showTip(event, 'fs3', 193)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 194)" onmouseover="showTip(event, 'fs11', 194)" class="i">height</span> <span class="o">/</span> <span class="n">2.</span>)) <span class="o">-</span> <span onmouseout="hideTip(event, 'fs3', 195)" onmouseover="showTip(event, 'fs3', 195)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 196)" onmouseover="showTip(event, 'fs12', 196)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 197)" onmouseover="showTip(event, 'fs10', 197)" class="i">y</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 198)" onmouseover="showTip(event, 'fs3', 198)" class="i">normalizedRelativeIntersectionY</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs3', 199)" onmouseover="showTip(event, 'fs3', 199)" class="i">relativeIntersectY</span> <span class="o">/</span> (<span onmouseout="hideTip(event, 'fs3', 200)" onmouseover="showTip(event, 'fs3', 200)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 201)" onmouseover="showTip(event, 'fs11', 201)" class="i">height</span> <span class="o">/</span> <span class="n">2.</span>))
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 202)" onmouseover="showTip(event, 'fs3', 202)" class="i">normalizedRelativeIntersectionY</span> <span class="o">=</span> <span class="n">0.</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs3', 203)" onmouseover="showTip(event, 'fs3', 203)" class="i">hitRightPaddle</span> <span class="k">then</span>
        <span onmouseout="hideTip(event, 'fs3', 204)" onmouseover="showTip(event, 'fs3', 204)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 205)" onmouseover="showTip(event, 'fs14', 205)" class="i">PI</span>
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs3', 206)" onmouseover="showTip(event, 'fs3', 206)" class="i">normalizedRelativeIntersectionY</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 207)" onmouseover="showTip(event, 'fs3', 207)" class="f">determineAngle</span>
</code></pre></td>
</tr>
</table>
<p>For the calculation, we determine the relative intersection where the ball hit the paddle. Afterwards we normalize that value. So for example, if the paddle is 20 pixels high, that value will be between -10 and 10. Therefore we can dynamically calculate the angle depending on the impact. As seen in the collision function, the determineAngle parameter of this calculation-function is a function itself. Depending on which paddle is hit, we have to use a slightly modified calculation of the final angle. As you can see in line 5, we’ve also got a special case we have to deal with. If the right paddle got hit in the exact center, so normalizedRelativeIntersectionY = 0. &amp;&amp; hitRightPaddle, we will have to return Pi as the new angle, since the radiant value of Pi is equal to 180°.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
<span class="l">55: </span>
<span class="l">56: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 208)" onmouseover="showTip(event, 'fs3', 208)" class="f">collision</span> <span onmouseout="hideTip(event, 'fs3', 209)" onmouseover="showTip(event, 'fs3', 209)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 210)" onmouseover="showTip(event, 'fs3', 210)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 211)" onmouseover="showTip(event, 'fs3', 211)" class="i">ball</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs3', 212)" onmouseover="showTip(event, 'fs3', 212)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 213)" onmouseover="showTip(event, 'fs3', 213)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs3', 214)" onmouseover="showTip(event, 'fs3', 214)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 215)" onmouseover="showTip(event, 'fs3', 215)" class="i">rightPaddle</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs3', 216)" onmouseover="showTip(event, 'fs3', 216)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 217)" onmouseover="showTip(event, 'fs3', 217)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 218)" onmouseover="showTip(event, 'fs15', 218)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs3', 219)" onmouseover="showTip(event, 'fs3', 219)" class="p">Top</span> | <span onmouseout="hideTip(event, 'fs3', 220)" onmouseover="showTip(event, 'fs3', 220)" class="p">Bottom</span> <span class="k">-&gt;</span> <span class="o">-</span><span onmouseout="hideTip(event, 'fs3', 221)" onmouseover="showTip(event, 'fs3', 221)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 222)" onmouseover="showTip(event, 'fs15', 222)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs3', 223)" onmouseover="showTip(event, 'fs3', 223)" class="p">Left</span> | <span onmouseout="hideTip(event, 'fs3', 224)" onmouseover="showTip(event, 'fs3', 224)" class="p">Right</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 225)" onmouseover="showTip(event, 'fs3', 225)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 226)" onmouseover="showTip(event, 'fs15', 226)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs3', 227)" onmouseover="showTip(event, 'fs3', 227)" class="p">LeftPaddle</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 228)" onmouseover="showTip(event, 'fs3', 228)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 229)" onmouseover="showTip(event, 'fs3', 229)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs3', 230)" onmouseover="showTip(event, 'fs3', 230)" class="i">leftPaddle</span> <span class="k">false</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs3', 231)" onmouseover="showTip(event, 'fs3', 231)" class="i">intersection</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 232)" onmouseover="showTip(event, 'fs3', 232)" class="i">intersection</span> <span class="o">*</span> (<span class="n">5.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs3', 233)" onmouseover="showTip(event, 'fs3', 233)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 234)" onmouseover="showTip(event, 'fs14', 234)" class="i">PI</span> <span class="o">/</span> <span class="n">12.</span>)) <span class="c">// Max. bounce = 75&#176;</span>
    | <span onmouseout="hideTip(event, 'fs3', 235)" onmouseover="showTip(event, 'fs3', 235)" class="p">RightPaddle</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 236)" onmouseover="showTip(event, 'fs3', 236)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 237)" onmouseover="showTip(event, 'fs3', 237)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs3', 238)" onmouseover="showTip(event, 'fs3', 238)" class="i">rightPaddle</span> <span class="k">true</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs3', 239)" onmouseover="showTip(event, 'fs3', 239)" class="i">intersection</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 240)" onmouseover="showTip(event, 'fs3', 240)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 241)" onmouseover="showTip(event, 'fs14', 241)" class="i">PI</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs3', 242)" onmouseover="showTip(event, 'fs3', 242)" class="i">intersection</span> <span class="o">*</span> (<span class="n">5.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs3', 243)" onmouseover="showTip(event, 'fs3', 243)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 244)" onmouseover="showTip(event, 'fs14', 244)" class="i">PI</span> <span class="o">/</span> <span class="n">12.</span>))

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 245)" onmouseover="showTip(event, 'fs3', 245)" class="f">moveBall</span> <span onmouseout="hideTip(event, 'fs3', 246)" onmouseover="showTip(event, 'fs3', 246)" class="i">angle</span> <span onmouseout="hideTip(event, 'fs3', 247)" onmouseover="showTip(event, 'fs3', 247)" class="i">ball</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs3', 248)" onmouseover="showTip(event, 'fs3', 248)" class="i">element</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs9', 249)" onmouseover="showTip(event, 'fs9', 249)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 250)" onmouseover="showTip(event, 'fs3', 250)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 251)" onmouseover="showTip(event, 'fs12', 251)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 252)" onmouseover="showTip(event, 'fs9', 252)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 253)" onmouseover="showTip(event, 'fs3', 253)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 254)" onmouseover="showTip(event, 'fs16', 254)" class="i">speed</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs3', 255)" onmouseover="showTip(event, 'fs3', 255)" class="f">cos</span> <span onmouseout="hideTip(event, 'fs3', 256)" onmouseover="showTip(event, 'fs3', 256)" class="i">angle</span>;
                <span onmouseout="hideTip(event, 'fs10', 257)" onmouseover="showTip(event, 'fs10', 257)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 258)" onmouseover="showTip(event, 'fs3', 258)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 259)" onmouseover="showTip(event, 'fs12', 259)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 260)" onmouseover="showTip(event, 'fs10', 260)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs3', 261)" onmouseover="showTip(event, 'fs3', 261)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 262)" onmouseover="showTip(event, 'fs16', 262)" class="i">speed</span> <span class="o">*</span> <span class="o">-</span><span onmouseout="hideTip(event, 'fs3', 263)" onmouseover="showTip(event, 'fs3', 263)" class="f">sin</span> <span onmouseout="hideTip(event, 'fs3', 264)" onmouseover="showTip(event, 'fs3', 264)" class="i">angle</span>;
                <span onmouseout="hideTip(event, 'fs3', 265)" onmouseover="showTip(event, 'fs3', 265)" class="i">width</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 266)" onmouseover="showTip(event, 'fs3', 266)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 267)" onmouseover="showTip(event, 'fs12', 267)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 268)" onmouseover="showTip(event, 'fs13', 268)" class="i">width</span>;
                <span onmouseout="hideTip(event, 'fs3', 269)" onmouseover="showTip(event, 'fs3', 269)" class="i">height</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 270)" onmouseover="showTip(event, 'fs3', 270)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 271)" onmouseover="showTip(event, 'fs12', 271)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 272)" onmouseover="showTip(event, 'fs11', 272)" class="i">height</span> };
    <span onmouseout="hideTip(event, 'fs3', 273)" onmouseover="showTip(event, 'fs3', 273)" class="i">speed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 274)" onmouseover="showTip(event, 'fs3', 274)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 275)" onmouseover="showTip(event, 'fs16', 275)" class="i">speed</span> <span class="o">+</span> <span class="n">0.005</span>;
    <span onmouseout="hideTip(event, 'fs3', 276)" onmouseover="showTip(event, 'fs3', 276)" class="i">angle</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 277)" onmouseover="showTip(event, 'fs3', 277)" class="i">angle</span>;
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 278)" onmouseover="showTip(event, 'fs3', 278)" class="f">checkGameStatus</span> <span onmouseout="hideTip(event, 'fs3', 279)" onmouseover="showTip(event, 'fs3', 279)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 280)" onmouseover="showTip(event, 'fs3', 280)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 281)" onmouseover="showTip(event, 'fs3', 281)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs3', 282)" onmouseover="showTip(event, 'fs3', 282)" class="i">gameStatus</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs3', 283)" onmouseover="showTip(event, 'fs3', 283)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 284)" onmouseover="showTip(event, 'fs3', 284)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs3', 285)" onmouseover="showTip(event, 'fs3', 285)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 286)" onmouseover="showTip(event, 'fs3', 286)" class="i">rightPaddle</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs3', 287)" onmouseover="showTip(event, 'fs3', 287)" class="p">Left</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs3', 288)" onmouseover="showTip(event, 'fs3', 288)" class="i">gameStatus</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs3', 289)" onmouseover="showTip(event, 'fs3', 289)" class="i">scoreRight</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 290)" onmouseover="showTip(event, 'fs3', 290)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 291)" onmouseover="showTip(event, 'fs17', 291)" class="i">scoreRight</span> <span class="o">+</span> <span class="n">1</span>; <span onmouseout="hideTip(event, 'fs3', 292)" onmouseover="showTip(event, 'fs3', 292)" class="i">active</span> <span class="o">=</span> <span class="k">false</span> }
    | <span onmouseout="hideTip(event, 'fs3', 293)" onmouseover="showTip(event, 'fs3', 293)" class="p">Right</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs3', 294)" onmouseover="showTip(event, 'fs3', 294)" class="i">gameStatus</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs3', 295)" onmouseover="showTip(event, 'fs3', 295)" class="i">scoreLeft</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 296)" onmouseover="showTip(event, 'fs3', 296)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 297)" onmouseover="showTip(event, 'fs18', 297)" class="i">scoreLeft</span> <span class="o">+</span> <span class="n">1</span>; <span onmouseout="hideTip(event, 'fs3', 298)" onmouseover="showTip(event, 'fs3', 298)" class="i">active</span> <span class="o">=</span> <span class="k">false</span> }
    | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs3', 299)" onmouseover="showTip(event, 'fs3', 299)" class="i">gameStatus</span>

<span class="c">// ------------------------------------------------------------------------------------------------------------------------</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 300)" onmouseover="showTip(event, 'fs3', 300)" class="f">render</span> (<span onmouseout="hideTip(event, 'fs19', 301)" onmouseover="showTip(event, 'fs19', 301)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs20', 302)" onmouseover="showTip(event, 'fs20', 302)" class="i">h</span>) <span onmouseout="hideTip(event, 'fs3', 303)" onmouseover="showTip(event, 'fs3', 303)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 304)" onmouseover="showTip(event, 'fs3', 304)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 305)" onmouseover="showTip(event, 'fs3', 305)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs3', 306)" onmouseover="showTip(event, 'fs3', 306)" class="i">gameStatus</span>  <span class="o">=</span>
    (<span class="n">0.</span>, <span class="n">0.</span>, <span onmouseout="hideTip(event, 'fs19', 307)" onmouseover="showTip(event, 'fs19', 307)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs20', 308)" onmouseover="showTip(event, 'fs20', 308)" class="i">h</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 309)" onmouseover="showTip(event, 'fs3', 309)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 310)" onmouseover="showTip(event, 'fs21', 310)" class="f">drawRect</span>(<span class="s">&quot;black&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs3', 311)" onmouseover="showTip(event, 'fs3', 311)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 312)" onmouseover="showTip(event, 'fs9', 312)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs3', 313)" onmouseover="showTip(event, 'fs3', 313)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 314)" onmouseover="showTip(event, 'fs10', 314)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs3', 315)" onmouseover="showTip(event, 'fs3', 315)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 316)" onmouseover="showTip(event, 'fs13', 316)" class="i">width</span>, <span onmouseout="hideTip(event, 'fs3', 317)" onmouseover="showTip(event, 'fs3', 317)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 318)" onmouseover="showTip(event, 'fs11', 318)" class="i">height</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 319)" onmouseover="showTip(event, 'fs3', 319)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 320)" onmouseover="showTip(event, 'fs21', 320)" class="f">drawRect</span>(<span class="s">&quot;white&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs3', 321)" onmouseover="showTip(event, 'fs3', 321)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 322)" onmouseover="showTip(event, 'fs9', 322)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs3', 323)" onmouseover="showTip(event, 'fs3', 323)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 324)" onmouseover="showTip(event, 'fs10', 324)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs3', 325)" onmouseover="showTip(event, 'fs3', 325)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 326)" onmouseover="showTip(event, 'fs13', 326)" class="i">width</span>, <span onmouseout="hideTip(event, 'fs3', 327)" onmouseover="showTip(event, 'fs3', 327)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 328)" onmouseover="showTip(event, 'fs11', 328)" class="i">height</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 329)" onmouseover="showTip(event, 'fs3', 329)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 330)" onmouseover="showTip(event, 'fs21', 330)" class="f">drawRect</span>(<span class="s">&quot;white&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs19', 331)" onmouseover="showTip(event, 'fs19', 331)" class="i">w</span> <span class="o">/</span> <span class="n">4.</span>, <span class="n">40.</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 332)" onmouseover="showTip(event, 'fs3', 332)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 333)" onmouseover="showTip(event, 'fs22', 333)" class="f">drawText</span> (<span onmouseout="hideTip(event, 'fs3', 334)" onmouseover="showTip(event, 'fs3', 334)" class="f">string</span>(<span onmouseout="hideTip(event, 'fs3', 335)" onmouseover="showTip(event, 'fs3', 335)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 336)" onmouseover="showTip(event, 'fs18', 336)" class="i">scoreLeft</span>)) <span class="s">&quot;white&quot;</span> <span class="s">&quot;30px Arial&quot;</span>
    (<span onmouseout="hideTip(event, 'fs19', 337)" onmouseover="showTip(event, 'fs19', 337)" class="i">w</span> <span class="o">/</span> <span class="n">1.25</span> <span class="o">-</span> <span class="n">30.</span>, <span class="n">40.</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 338)" onmouseover="showTip(event, 'fs3', 338)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 339)" onmouseover="showTip(event, 'fs22', 339)" class="f">drawText</span> (<span onmouseout="hideTip(event, 'fs3', 340)" onmouseover="showTip(event, 'fs3', 340)" class="f">string</span>(<span onmouseout="hideTip(event, 'fs3', 341)" onmouseover="showTip(event, 'fs3', 341)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 342)" onmouseover="showTip(event, 'fs17', 342)" class="i">scoreRight</span>)) <span class="s">&quot;white&quot;</span> <span class="s">&quot;30px Arial&quot;</span>
    (<span onmouseout="hideTip(event, 'fs3', 343)" onmouseover="showTip(event, 'fs3', 343)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 344)" onmouseover="showTip(event, 'fs12', 344)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 345)" onmouseover="showTip(event, 'fs9', 345)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs3', 346)" onmouseover="showTip(event, 'fs3', 346)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 347)" onmouseover="showTip(event, 'fs12', 347)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 348)" onmouseover="showTip(event, 'fs10', 348)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs3', 349)" onmouseover="showTip(event, 'fs3', 349)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 350)" onmouseover="showTip(event, 'fs12', 350)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 351)" onmouseover="showTip(event, 'fs13', 351)" class="i">width</span>, <span class="n">0.</span>, <span class="n">2.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs3', 352)" onmouseover="showTip(event, 'fs3', 352)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 353)" onmouseover="showTip(event, 'fs14', 353)" class="i">PI</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 354)" onmouseover="showTip(event, 'fs3', 354)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 355)" onmouseover="showTip(event, 'fs23', 355)" class="f">drawCircle</span>(<span class="s">&quot;yellow&quot;</span>)
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 356)" onmouseover="showTip(event, 'fs3', 356)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 357)" onmouseover="showTip(event, 'fs24', 357)" class="i">active</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 358)" onmouseover="showTip(event, 'fs3', 358)" class="f">not</span> <span class="k">then</span>
        (<span onmouseout="hideTip(event, 'fs19', 359)" onmouseover="showTip(event, 'fs19', 359)" class="i">w</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">230.</span>, <span onmouseout="hideTip(event, 'fs20', 360)" onmouseover="showTip(event, 'fs20', 360)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">+</span> <span class="n">40.</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 361)" onmouseover="showTip(event, 'fs3', 361)" class="t">Win</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 362)" onmouseover="showTip(event, 'fs22', 362)" class="f">drawText</span> <span class="s">&quot;Press space to start&quot;</span> <span class="s">&quot;green&quot;</span> <span class="s">&quot;40px Lucida Console&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 363)" onmouseover="showTip(event, 'fs3', 363)" class="i">initialLeftPaddle</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs9', 364)" onmouseover="showTip(event, 'fs9', 364)" class="i">x</span> <span class="o">=</span> <span class="n">10.</span>; <span onmouseout="hideTip(event, 'fs10', 365)" onmouseover="showTip(event, 'fs10', 365)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 366)" onmouseover="showTip(event, 'fs7', 366)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">70.</span> <span class="o">/</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs3', 367)" onmouseover="showTip(event, 'fs3', 367)" class="i">width</span> <span class="o">=</span> <span class="n">15.</span>; <span onmouseout="hideTip(event, 'fs3', 368)" onmouseover="showTip(event, 'fs3', 368)" class="i">height</span> <span class="o">=</span> <span class="n">70.</span> }
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 369)" onmouseover="showTip(event, 'fs3', 369)" class="i">initialRightPaddle</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs9', 370)" onmouseover="showTip(event, 'fs9', 370)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 371)" onmouseover="showTip(event, 'fs6', 371)" class="i">w</span> <span class="o">-</span> <span class="n">15.</span> <span class="o">-</span> <span class="n">10.</span>; <span onmouseout="hideTip(event, 'fs10', 372)" onmouseover="showTip(event, 'fs10', 372)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 373)" onmouseover="showTip(event, 'fs7', 373)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">70.</span> <span class="o">/</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs3', 374)" onmouseover="showTip(event, 'fs3', 374)" class="i">width</span> <span class="o">=</span> <span class="n">15.</span>; <span onmouseout="hideTip(event, 'fs3', 375)" onmouseover="showTip(event, 'fs3', 375)" class="i">height</span> <span class="o">=</span> <span class="n">70.</span> }
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 376)" onmouseover="showTip(event, 'fs3', 376)" class="i">initialBall</span> <span class="o">=</span>
    { <span onmouseout="hideTip(event, 'fs3', 377)" onmouseover="showTip(event, 'fs3', 377)" class="i">element</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs9', 378)" onmouseover="showTip(event, 'fs9', 378)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 379)" onmouseover="showTip(event, 'fs6', 379)" class="i">w</span> <span class="o">/</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs10', 380)" onmouseover="showTip(event, 'fs10', 380)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 381)" onmouseover="showTip(event, 'fs7', 381)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs3', 382)" onmouseover="showTip(event, 'fs3', 382)" class="i">width</span> <span class="o">=</span> <span class="n">5.</span>; <span onmouseout="hideTip(event, 'fs3', 383)" onmouseover="showTip(event, 'fs3', 383)" class="i">height</span> <span class="o">=</span> <span class="n">5.</span> };
    <span onmouseout="hideTip(event, 'fs3', 384)" onmouseover="showTip(event, 'fs3', 384)" class="i">speed</span> <span class="o">=</span> <span class="n">3.</span>;
    <span onmouseout="hideTip(event, 'fs3', 385)" onmouseover="showTip(event, 'fs3', 385)" class="i">angle</span> <span class="o">=</span> <span class="n">0.</span> }

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 386)" onmouseover="showTip(event, 'fs3', 386)" class="i">initialGameStatus</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs3', 387)" onmouseover="showTip(event, 'fs3', 387)" class="i">scoreLeft</span> <span class="o">=</span> <span class="n">0</span>; <span onmouseout="hideTip(event, 'fs3', 388)" onmouseover="showTip(event, 'fs3', 388)" class="i">scoreRight</span> <span class="o">=</span> <span class="n">0</span>; <span onmouseout="hideTip(event, 'fs3', 389)" onmouseover="showTip(event, 'fs3', 389)" class="i">active</span> <span class="o">=</span> <span class="k">false</span>; }

<span onmouseout="hideTip(event, 'fs3', 390)" onmouseover="showTip(event, 'fs3', 390)" class="t">Keyboard</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs25', 391)" onmouseover="showTip(event, 'fs25', 391)" class="f">init</span>()

<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs3', 392)" onmouseover="showTip(event, 'fs3', 392)" class="f">update</span> <span onmouseout="hideTip(event, 'fs3', 393)" onmouseover="showTip(event, 'fs3', 393)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 394)" onmouseover="showTip(event, 'fs3', 394)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 395)" onmouseover="showTip(event, 'fs3', 395)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs3', 396)" onmouseover="showTip(event, 'fs3', 396)" class="i">gameStatus</span> () <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 397)" onmouseover="showTip(event, 'fs3', 397)" class="i">leftPaddle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 398)" onmouseover="showTip(event, 'fs3', 398)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 399)" onmouseover="showTip(event, 'fs24', 399)" class="i">active</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs3', 400)" onmouseover="showTip(event, 'fs3', 400)" class="i">leftPaddle</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 401)" onmouseover="showTip(event, 'fs3', 401)" class="f">move</span> (<span onmouseout="hideTip(event, 'fs3', 402)" onmouseover="showTip(event, 'fs3', 402)" class="t">Keyboard</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs26', 403)" onmouseover="showTip(event, 'fs26', 403)" class="f">leftControlsPressed</span>()) <span class="k">else</span> <span onmouseout="hideTip(event, 'fs3', 404)" onmouseover="showTip(event, 'fs3', 404)" class="i">initialLeftPaddle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 405)" onmouseover="showTip(event, 'fs3', 405)" class="i">rightPaddle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 406)" onmouseover="showTip(event, 'fs3', 406)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 407)" onmouseover="showTip(event, 'fs24', 407)" class="i">active</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs3', 408)" onmouseover="showTip(event, 'fs3', 408)" class="i">rightPaddle</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 409)" onmouseover="showTip(event, 'fs3', 409)" class="f">move</span> (<span onmouseout="hideTip(event, 'fs3', 410)" onmouseover="showTip(event, 'fs3', 410)" class="t">Keyboard</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs27', 411)" onmouseover="showTip(event, 'fs27', 411)" class="f">rightControlsPressed</span>()) <span class="k">else</span> <span onmouseout="hideTip(event, 'fs3', 412)" onmouseover="showTip(event, 'fs3', 412)" class="i">initialRightPaddle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 413)" onmouseover="showTip(event, 'fs3', 413)" class="i">angle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 414)" onmouseover="showTip(event, 'fs3', 414)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 415)" onmouseover="showTip(event, 'fs24', 415)" class="i">active</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs3', 416)" onmouseover="showTip(event, 'fs3', 416)" class="f">collision</span> <span onmouseout="hideTip(event, 'fs3', 417)" onmouseover="showTip(event, 'fs3', 417)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 418)" onmouseover="showTip(event, 'fs3', 418)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 419)" onmouseover="showTip(event, 'fs3', 419)" class="i">ball</span> <span class="k">else</span> <span onmouseout="hideTip(event, 'fs3', 420)" onmouseover="showTip(event, 'fs3', 420)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 421)" onmouseover="showTip(event, 'fs15', 421)" class="i">angle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 422)" onmouseover="showTip(event, 'fs3', 422)" class="i">ball</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 423)" onmouseover="showTip(event, 'fs3', 423)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs24', 424)" onmouseover="showTip(event, 'fs24', 424)" class="i">active</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs3', 425)" onmouseover="showTip(event, 'fs3', 425)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 426)" onmouseover="showTip(event, 'fs3', 426)" class="f">moveBall</span> <span onmouseout="hideTip(event, 'fs3', 427)" onmouseover="showTip(event, 'fs3', 427)" class="i">angle</span> <span class="k">else</span> { <span onmouseout="hideTip(event, 'fs3', 428)" onmouseover="showTip(event, 'fs3', 428)" class="i">initialBall</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs3', 429)" onmouseover="showTip(event, 'fs3', 429)" class="i">angle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 430)" onmouseover="showTip(event, 'fs3', 430)" class="i">angle</span> <span class="o">=</span> <span class="n">0.</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs3', 431)" onmouseover="showTip(event, 'fs3', 431)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 432)" onmouseover="showTip(event, 'fs14', 432)" class="i">PI</span> <span class="k">else</span> <span class="n">0.</span> }
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 433)" onmouseover="showTip(event, 'fs3', 433)" class="i">gameStatus</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs3', 434)" onmouseover="showTip(event, 'fs3', 434)" class="t">Keyboard</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 435)" onmouseover="showTip(event, 'fs28', 435)" class="f">spacePressed</span>() <span class="o">=</span> <span class="n">1</span> <span class="k">then</span> { <span onmouseout="hideTip(event, 'fs3', 436)" onmouseover="showTip(event, 'fs3', 436)" class="i">gameStatus</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs3', 437)" onmouseover="showTip(event, 'fs3', 437)" class="i">active</span> <span class="o">=</span> <span class="k">true</span> } <span class="k">else</span> <span onmouseout="hideTip(event, 'fs3', 438)" onmouseover="showTip(event, 'fs3', 438)" class="i">gameStatus</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 439)" onmouseover="showTip(event, 'fs3', 439)" class="f">checkGameStatus</span> <span onmouseout="hideTip(event, 'fs3', 440)" onmouseover="showTip(event, 'fs3', 440)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 441)" onmouseover="showTip(event, 'fs3', 441)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 442)" onmouseover="showTip(event, 'fs3', 442)" class="i">ball</span>
    <span onmouseout="hideTip(event, 'fs3', 443)" onmouseover="showTip(event, 'fs3', 443)" class="f">render</span> (<span onmouseout="hideTip(event, 'fs6', 444)" onmouseover="showTip(event, 'fs6', 444)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs7', 445)" onmouseover="showTip(event, 'fs7', 445)" class="i">h</span>) <span onmouseout="hideTip(event, 'fs3', 446)" onmouseover="showTip(event, 'fs3', 446)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 447)" onmouseover="showTip(event, 'fs3', 447)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 448)" onmouseover="showTip(event, 'fs3', 448)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs3', 449)" onmouseover="showTip(event, 'fs3', 449)" class="i">gameStatus</span>
    <span onmouseout="hideTip(event, 'fs3', 450)" onmouseover="showTip(event, 'fs3', 450)" class="i">window</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 451)" onmouseover="showTip(event, 'fs3', 451)" class="i">setTimeout</span>(<span onmouseout="hideTip(event, 'fs3', 452)" onmouseover="showTip(event, 'fs3', 452)" class="i">update</span> <span onmouseout="hideTip(event, 'fs3', 453)" onmouseover="showTip(event, 'fs3', 453)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 454)" onmouseover="showTip(event, 'fs3', 454)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 455)" onmouseover="showTip(event, 'fs3', 455)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs3', 456)" onmouseover="showTip(event, 'fs3', 456)" class="i">gameStatus</span>, <span class="n">1000.</span> <span class="o">/</span> <span class="n">60.</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs3', 457)" onmouseover="showTip(event, 'fs3', 457)" class="f">ignore</span>

<span onmouseout="hideTip(event, 'fs3', 458)" onmouseover="showTip(event, 'fs3', 458)" class="f">update</span> <span onmouseout="hideTip(event, 'fs3', 459)" onmouseover="showTip(event, 'fs3', 459)" class="i">initialLeftPaddle</span> <span onmouseout="hideTip(event, 'fs3', 460)" onmouseover="showTip(event, 'fs3', 460)" class="i">initialRightPaddle</span> <span onmouseout="hideTip(event, 'fs3', 461)" onmouseover="showTip(event, 'fs3', 461)" class="i">initialBall</span> <span onmouseout="hideTip(event, 'fs3', 462)" onmouseover="showTip(event, 'fs3', 462)" class="i">initialGameStatus</span> ()
</code></pre></td>
</tr>
</table>


<div class="tip" id="fs1">namespace Fable</div>
<div class="tip" id="fs2">namespace Fable.Core</div>
<div class="tip" id="fs3"></div>
<div class="tip" id="fs4">namespace Fable.Import</div>
<div class="tip" id="fs5">module Browser<br /><br />from Fable.Import</div>
<div class="tip" id="fs6">val w : float<br /><br />Full name: Pong.w</div>
<div class="tip" id="fs7">val h : float<br /><br />Full name: Pong.h</div>
<div class="tip" id="fs8">val dimensions : unit -&gt; &#39;a * &#39;b<br /><br />Full name: Win.Win.dimensions</div>
<div class="tip" id="fs9">PongElement.x: float</div>
<div class="tip" id="fs10">PongElement.y: float</div>
<div class="tip" id="fs11">PongElement.height: float</div>
<div class="tip" id="fs12">BallElement.element: PongElement</div>
<div class="tip" id="fs13">PongElement.width: float</div>
<div class="tip" id="fs14">field Math.PI = 3.14159265359</div>
<div class="tip" id="fs15">BallElement.angle: float</div>
<div class="tip" id="fs16">BallElement.speed: float</div>
<div class="tip" id="fs17">GameStatus.scoreRight: int</div>
<div class="tip" id="fs18">GameStatus.scoreLeft: int</div>
<div class="tip" id="fs19">val w : float</div>
<div class="tip" id="fs20">val h : float</div>
<div class="tip" id="fs21">val drawRect : color:&#39;a -&gt; rect:&#39;b -&gt; &#39;c<br /><br />Full name: Win.Win.drawRect<br /><em><br /><br />&#160;Fill rectangle with given color</em></div>
<div class="tip" id="fs22">val drawText : text:&#39;a -&gt; color:&#39;b -&gt; font:&#39;c -&gt; position:&#39;d -&gt; &#39;e<br /><br />Full name: Win.Win.drawText</div>
<div class="tip" id="fs23">val drawCircle : color:&#39;a -&gt; x:&#39;b * y:&#39;c * radius:&#39;d * startAngle:&#39;e * endAngle:&#39;f -&gt; &#39;g<br /><br />Full name: Win.Win.drawCircle</div>
<div class="tip" id="fs24">GameStatus.active: bool</div>
<div class="tip" id="fs25">val init : unit -&gt; &#39;a<br /><br />Full name: Keyboard.Keyboard.init</div>
<div class="tip" id="fs26">val leftControlsPressed : unit -&gt; int * int<br /><br />Full name: Keyboard.Keyboard.leftControlsPressed<br /><em><br /><br />&#160;code 87 = w, code 83 = s</em></div>
<div class="tip" id="fs27">val rightControlsPressed : unit -&gt; int * int<br /><br />Full name: Keyboard.Keyboard.rightControlsPressed<br /><em><br /><br />&#160;code 38 = up, code 40 = down</em></div>
<div class="tip" id="fs28">val spacePressed : unit -&gt; int<br /><br />Full name: Keyboard.Keyboard.spacePressed</div>

    </div>
    <div class="col-md-1 col-lg-2"></div>
  </div>
</div>

  </div>

  <a class="gh-forkme" href="https://github.com/fable-compiler/Fable"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
</body>
</html>
