<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Alfonso Garcia-Caro">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,300,600,700|Roboto+Mono' rel='stylesheet' type='text/css'>
    <link href="//fable.io/content/custom.css" rel='stylesheet' type='text/css'>
    <script src="//fable.io/content/tips.js"></script>
    <link rel="stylesheet" type="text/css" href="//fable.io/content/snippets.css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <!--<script language="javascript" type="text/javascript">
      function init() {
          try {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
          } catch(e) { /* For local development only */ }
      }
      window.addEventListener("load", init, false);
    </script>-->

  <title>Fable Pong - F# |> BABEL</title>
  <script src="../scripts/core.min.js"></script>

  <meta name="description" content="Two player Pong clone using HTML5 canvas">

</head>
<body>

  <div class="fable-navbar">
  <div class="container">
  <nav class="navbar navbar-default">
    <div class="navbar-wrapper">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="//fable.io">Fable</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class=""><a href="//fable.io">home</a></li>
          <li class="active"><a href="//fable.io/samples.html">samples</a></li>
          <li class=""><a href="//fable.io/docs.html">docs</a></li>
          <li class=""><a href="//fable.io/blog.html">blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
  </div>
  </div>

  <div class="fable-content-wrapper">

<div class="fable-heading">
<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Fable Pong</h1>
      <p>Two player Pong clone using HTML5 canvas</p>
    </div>
  </div>
</div>
</div>

<div class="container fable-content">
  <div class="row">
    <div class="col-md-1 col-lg-2"></div>
    <div class="col-sm-12 col-md-10 col-lg-8">
      <p>This demo shows a Fable implementation of Pong, which is also part of the <a href="https://sergeytihon.wordpress.com/2016/10/23/f-advent-calendar-in-english-2016/">F# Advent Calendar in English 2016</a>.
You can find the <a href="https://github.com/fsprojects/Fable/blob/master/samples/browser/pong/pong.fsx">full source code on GitHub</a> and learn more in <a href="http://oopbase.de/posts/implementing-pong-in-a-functional-manner-with-fable.html">this post</a>.</p>
    </div>
    <div class="col-md-1 col-lg-2"></div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="app-container" style="">

    <div style="height:650px">
        <p>Left Paddle: w => up; s => down | Right Paddle: o => up; l => down<p>
        <canvas id="canvas" width="800" height="600" style="position: absolute"></canvas>
    </div>
    <script src="out/bundle.js"></script>

      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-1 col-lg-2"></div>
    <div class="col-sm-12 col-md-10 col-lg-8">
      <h2><a name="Defining-the-model" class="anchor" href="#Defining-the-model">Defining the model</a></h2>
<p>When thinking about the Pong game, there are basically three types of models:</p>
<ol>
<li><strong>Paddles:</strong> The paddles have got a position and a specific size.</li>
<li><strong>Ball:</strong> The ball has got a position and a size as well. But it has also got speed and an angle.</li>
<li><strong>Game status:</strong> Some kind of storage containing information about the current score.</li>
</ol>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="t">PongElement</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="i">x</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="i">y</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="i">width</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 12)" onmouseover="showTip(event, 'fs8', 12)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="i">height</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="t">float</span>;
}

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="t">BallElement</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="i">element</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="t">PongElement</span>;
    <span onmouseout="hideTip(event, 'fs14', 18)" onmouseover="showTip(event, 'fs14', 18)" class="i">speed</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 19)" onmouseover="showTip(event, 'fs8', 19)" class="t">float</span>;
    <span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="i">angle</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 21)" onmouseover="showTip(event, 'fs8', 21)" class="t">float</span>;
}

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs16', 22)" onmouseover="showTip(event, 'fs16', 22)" class="t">GameStatus</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs17', 23)" onmouseover="showTip(event, 'fs17', 23)" class="i">scoreLeft</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs18', 24)" onmouseover="showTip(event, 'fs18', 24)" class="t">int</span>;
    <span onmouseout="hideTip(event, 'fs19', 25)" onmouseover="showTip(event, 'fs19', 25)" class="i">scoreRight</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="t">int</span>;
    <span onmouseout="hideTip(event, 'fs20', 27)" onmouseover="showTip(event, 'fs20', 27)" class="i">active</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs21', 28)" onmouseover="showTip(event, 'fs21', 28)" class="t">bool</span>;
}
</code></pre></td>
</tr>
</table>
<h2><a name="Controlling-the-paddles" class="anchor" href="#Controlling-the-paddles">Controlling the paddles</a></h2>
<p>To control a paddle there are only two functions necessary. A canMove-function, to indicate whether a paddle can move in a certain direction, and an actual move-function to move the paddle.
The parameter direction is a tuple (int * int). When the first parameter of the tuple is set to 1, we want the paddle to move up. When the second parameter of the tuple is set to 1, we want the paddle to move down. By using pattern matching we can check which value of the tuple is set to 1. Since every object is immutable, we either return a copy of the current paddle with its new Y-position (line 10 and 11) or simply return the input-paddle if no movement is allowed.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 29)" onmouseover="showTip(event, 'fs22', 29)" class="f">canMove</span> <span onmouseout="hideTip(event, 'fs23', 30)" onmouseover="showTip(event, 'fs23', 30)" class="i">direction</span> <span onmouseout="hideTip(event, 'fs24', 31)" onmouseover="showTip(event, 'fs24', 31)" class="i">paddle</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs23', 32)" onmouseover="showTip(event, 'fs23', 32)" class="i">direction</span> <span class="k">with</span>
    | (<span class="n">1</span>, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs24', 33)" onmouseover="showTip(event, 'fs24', 33)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 34)" onmouseover="showTip(event, 'fs9', 34)" class="i">y</span> <span class="o">&gt;</span> <span class="n">0.</span>
    | (_, <span class="n">1</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs24', 35)" onmouseover="showTip(event, 'fs24', 35)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 36)" onmouseover="showTip(event, 'fs9', 36)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs24', 37)" onmouseover="showTip(event, 'fs24', 37)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 38)" onmouseover="showTip(event, 'fs11', 38)" class="i">height</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs5', 39)" onmouseover="showTip(event, 'fs5', 39)" class="i">h</span>
    | _ <span class="k">-&gt;</span> <span class="k">false</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="f">move</span> <span onmouseout="hideTip(event, 'fs23', 41)" onmouseover="showTip(event, 'fs23', 41)" class="i">direction</span> <span onmouseout="hideTip(event, 'fs24', 42)" onmouseover="showTip(event, 'fs24', 42)" class="i">paddle</span> <span class="o">=</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs24', 43)" onmouseover="showTip(event, 'fs24', 43)" class="i">paddle</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs22', 44)" onmouseover="showTip(event, 'fs22', 44)" class="f">canMove</span> <span onmouseout="hideTip(event, 'fs23', 45)" onmouseover="showTip(event, 'fs23', 45)" class="i">direction</span> <span class="k">then</span>
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs23', 46)" onmouseover="showTip(event, 'fs23', 46)" class="i">direction</span> <span class="k">with</span>
        | (<span class="n">1</span>, _) <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs24', 47)" onmouseover="showTip(event, 'fs24', 47)" class="i">paddle</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs9', 48)" onmouseover="showTip(event, 'fs9', 48)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 49)" onmouseover="showTip(event, 'fs24', 49)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 50)" onmouseover="showTip(event, 'fs9', 50)" class="i">y</span> <span class="o">-</span> <span class="n">5.</span> }
        | (_, <span class="n">1</span>) <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs24', 51)" onmouseover="showTip(event, 'fs24', 51)" class="i">paddle</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs9', 52)" onmouseover="showTip(event, 'fs9', 52)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 53)" onmouseover="showTip(event, 'fs24', 53)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 54)" onmouseover="showTip(event, 'fs9', 54)" class="i">y</span> <span class="o">+</span> <span class="n">5.</span> }
        | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs24', 55)" onmouseover="showTip(event, 'fs24', 55)" class="i">paddle</span>
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs24', 56)" onmouseover="showTip(event, 'fs24', 56)" class="i">paddle</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Collision-detection" class="anchor" href="#Collision-detection">Collision detection</a></h2>
<p>This discriminated union describes the whole collision system of the game: There can be no collision (None), the Top or Bottom of the canvas may be hit, the Left or Right part of the canvas may be hit (so a player scored) or finally a paddle was hit (LeftPaddle &amp; RightPaddle). The following function takes the paddles and the ball as input parameters and returns the found type of collision.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs26', 57)" onmouseover="showTip(event, 'fs26', 57)" class="t">Collision</span> <span class="o">=</span>
    | <span onmouseout="hideTip(event, 'fs27', 58)" onmouseover="showTip(event, 'fs27', 58)" class="p">None</span>
    | <span onmouseout="hideTip(event, 'fs28', 59)" onmouseover="showTip(event, 'fs28', 59)" class="p">Top</span>
    | <span onmouseout="hideTip(event, 'fs29', 60)" onmouseover="showTip(event, 'fs29', 60)" class="p">Bottom</span>
    | <span onmouseout="hideTip(event, 'fs30', 61)" onmouseover="showTip(event, 'fs30', 61)" class="p">Left</span>
    | <span onmouseout="hideTip(event, 'fs31', 62)" onmouseover="showTip(event, 'fs31', 62)" class="p">Right</span>
    | <span onmouseout="hideTip(event, 'fs32', 63)" onmouseover="showTip(event, 'fs32', 63)" class="p">LeftPaddle</span>
    | <span onmouseout="hideTip(event, 'fs33', 64)" onmouseover="showTip(event, 'fs33', 64)" class="p">RightPaddle</span>
</code></pre></td>
</tr>
</table>
<p>With this function, implementing a final collision-function to determine the new angle of the ball is straight forward again. (Thanks to pattern matching)</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 65)" onmouseover="showTip(event, 'fs34', 65)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs35', 66)" onmouseover="showTip(event, 'fs35', 66)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 67)" onmouseover="showTip(event, 'fs36', 67)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 68)" onmouseover="showTip(event, 'fs37', 68)" class="i">ball</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 69)" onmouseover="showTip(event, 'fs38', 69)" class="i">hitTop</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 70)" onmouseover="showTip(event, 'fs37', 70)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 71)" onmouseover="showTip(event, 'fs13', 71)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 72)" onmouseover="showTip(event, 'fs9', 72)" class="i">y</span> <span class="o">&lt;=</span> <span class="n">0.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 73)" onmouseover="showTip(event, 'fs39', 73)" class="i">hitBottom</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 74)" onmouseover="showTip(event, 'fs37', 74)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 75)" onmouseover="showTip(event, 'fs13', 75)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 76)" onmouseover="showTip(event, 'fs9', 76)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 77)" onmouseover="showTip(event, 'fs37', 77)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 78)" onmouseover="showTip(event, 'fs13', 78)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 79)" onmouseover="showTip(event, 'fs11', 79)" class="i">height</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 80)" onmouseover="showTip(event, 'fs5', 80)" class="i">h</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 81)" onmouseover="showTip(event, 'fs40', 81)" class="i">hitLeft</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs37', 82)" onmouseover="showTip(event, 'fs37', 82)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 83)" onmouseover="showTip(event, 'fs13', 83)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 84)" onmouseover="showTip(event, 'fs7', 84)" class="i">x</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs35', 85)" onmouseover="showTip(event, 'fs35', 85)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 86)" onmouseover="showTip(event, 'fs7', 86)" class="i">x</span>
        <span class="o">&amp;&amp;</span> ((<span onmouseout="hideTip(event, 'fs37', 87)" onmouseover="showTip(event, 'fs37', 87)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 88)" onmouseover="showTip(event, 'fs13', 88)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 89)" onmouseover="showTip(event, 'fs9', 89)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 90)" onmouseover="showTip(event, 'fs35', 90)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 91)" onmouseover="showTip(event, 'fs9', 91)" class="i">y</span>
            <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 92)" onmouseover="showTip(event, 'fs37', 92)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 93)" onmouseover="showTip(event, 'fs13', 93)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 94)" onmouseover="showTip(event, 'fs9', 94)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs35', 95)" onmouseover="showTip(event, 'fs35', 95)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 96)" onmouseover="showTip(event, 'fs9', 96)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 97)" onmouseover="showTip(event, 'fs35', 97)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 98)" onmouseover="showTip(event, 'fs11', 98)" class="i">height</span>)
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 99)" onmouseover="showTip(event, 'fs41', 99)" class="f">not</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 100)" onmouseover="showTip(event, 'fs42', 100)" class="i">hitRight</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs37', 101)" onmouseover="showTip(event, 'fs37', 101)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 102)" onmouseover="showTip(event, 'fs13', 102)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 103)" onmouseover="showTip(event, 'fs7', 103)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 104)" onmouseover="showTip(event, 'fs37', 104)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 105)" onmouseover="showTip(event, 'fs13', 105)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 106)" onmouseover="showTip(event, 'fs10', 106)" class="i">width</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 107)" onmouseover="showTip(event, 'fs36', 107)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 108)" onmouseover="showTip(event, 'fs7', 108)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs36', 109)" onmouseover="showTip(event, 'fs36', 109)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 110)" onmouseover="showTip(event, 'fs10', 110)" class="i">width</span>
        <span class="o">&amp;&amp;</span> ((<span onmouseout="hideTip(event, 'fs37', 111)" onmouseover="showTip(event, 'fs37', 111)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 112)" onmouseover="showTip(event, 'fs13', 112)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 113)" onmouseover="showTip(event, 'fs9', 113)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 114)" onmouseover="showTip(event, 'fs36', 114)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 115)" onmouseover="showTip(event, 'fs9', 115)" class="i">y</span>
            <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 116)" onmouseover="showTip(event, 'fs37', 116)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 117)" onmouseover="showTip(event, 'fs13', 117)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 118)" onmouseover="showTip(event, 'fs9', 118)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs36', 119)" onmouseover="showTip(event, 'fs36', 119)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 120)" onmouseover="showTip(event, 'fs9', 120)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs36', 121)" onmouseover="showTip(event, 'fs36', 121)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 122)" onmouseover="showTip(event, 'fs11', 122)" class="i">height</span>)
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 123)" onmouseover="showTip(event, 'fs41', 123)" class="f">not</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 124)" onmouseover="showTip(event, 'fs43', 124)" class="i">hitLeftPaddle</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs37', 125)" onmouseover="showTip(event, 'fs37', 125)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 126)" onmouseover="showTip(event, 'fs13', 126)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 127)" onmouseover="showTip(event, 'fs7', 127)" class="i">x</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs35', 128)" onmouseover="showTip(event, 'fs35', 128)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 129)" onmouseover="showTip(event, 'fs7', 129)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 130)" onmouseover="showTip(event, 'fs35', 130)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 131)" onmouseover="showTip(event, 'fs10', 131)" class="i">width</span>
        <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 132)" onmouseover="showTip(event, 'fs37', 132)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 133)" onmouseover="showTip(event, 'fs13', 133)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 134)" onmouseover="showTip(event, 'fs9', 134)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 135)" onmouseover="showTip(event, 'fs35', 135)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 136)" onmouseover="showTip(event, 'fs9', 136)" class="i">y</span>
        <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 137)" onmouseover="showTip(event, 'fs37', 137)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 138)" onmouseover="showTip(event, 'fs13', 138)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 139)" onmouseover="showTip(event, 'fs9', 139)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs35', 140)" onmouseover="showTip(event, 'fs35', 140)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 141)" onmouseover="showTip(event, 'fs9', 141)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs35', 142)" onmouseover="showTip(event, 'fs35', 142)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 143)" onmouseover="showTip(event, 'fs11', 143)" class="i">height</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs44', 144)" onmouseover="showTip(event, 'fs44', 144)" class="i">hitRightPaddle</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs37', 145)" onmouseover="showTip(event, 'fs37', 145)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 146)" onmouseover="showTip(event, 'fs13', 146)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 147)" onmouseover="showTip(event, 'fs7', 147)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 148)" onmouseover="showTip(event, 'fs37', 148)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 149)" onmouseover="showTip(event, 'fs13', 149)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 150)" onmouseover="showTip(event, 'fs10', 150)" class="i">width</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 151)" onmouseover="showTip(event, 'fs36', 151)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 152)" onmouseover="showTip(event, 'fs7', 152)" class="i">x</span>
        <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 153)" onmouseover="showTip(event, 'fs37', 153)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 154)" onmouseover="showTip(event, 'fs13', 154)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 155)" onmouseover="showTip(event, 'fs9', 155)" class="i">y</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 156)" onmouseover="showTip(event, 'fs36', 156)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 157)" onmouseover="showTip(event, 'fs9', 157)" class="i">y</span>
        <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs37', 158)" onmouseover="showTip(event, 'fs37', 158)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 159)" onmouseover="showTip(event, 'fs13', 159)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 160)" onmouseover="showTip(event, 'fs9', 160)" class="i">y</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs36', 161)" onmouseover="showTip(event, 'fs36', 161)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 162)" onmouseover="showTip(event, 'fs9', 162)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs36', 163)" onmouseover="showTip(event, 'fs36', 163)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 164)" onmouseover="showTip(event, 'fs11', 164)" class="i">height</span>
    <span class="k">match</span> (<span onmouseout="hideTip(event, 'fs38', 165)" onmouseover="showTip(event, 'fs38', 165)" class="i">hitTop</span>, <span onmouseout="hideTip(event, 'fs39', 166)" onmouseover="showTip(event, 'fs39', 166)" class="i">hitBottom</span>, <span onmouseout="hideTip(event, 'fs40', 167)" onmouseover="showTip(event, 'fs40', 167)" class="i">hitLeft</span>, <span onmouseout="hideTip(event, 'fs42', 168)" onmouseover="showTip(event, 'fs42', 168)" class="i">hitRight</span>, <span onmouseout="hideTip(event, 'fs43', 169)" onmouseover="showTip(event, 'fs43', 169)" class="i">hitLeftPaddle</span>, <span onmouseout="hideTip(event, 'fs44', 170)" onmouseover="showTip(event, 'fs44', 170)" class="i">hitRightPaddle</span>) <span class="k">with</span>
    | (<span class="k">true</span>, _, _, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs28', 171)" onmouseover="showTip(event, 'fs28', 171)" class="p">Top</span>
    | (_, <span class="k">true</span>, _, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs29', 172)" onmouseover="showTip(event, 'fs29', 172)" class="p">Bottom</span>
    | (_, _, <span class="k">true</span>, _, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs30', 173)" onmouseover="showTip(event, 'fs30', 173)" class="p">Left</span>
    | (_, _, _, <span class="k">true</span>, _, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs31', 174)" onmouseover="showTip(event, 'fs31', 174)" class="p">Right</span>
    | (_, _, _, _, <span class="k">true</span>, _) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs32', 175)" onmouseover="showTip(event, 'fs32', 175)" class="p">LeftPaddle</span>
    | (_, _, _, _, _, <span class="k">true</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs33', 176)" onmouseover="showTip(event, 'fs33', 176)" class="p">RightPaddle</span>
    | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 177)" onmouseover="showTip(event, 'fs27', 177)" class="p">None</span>
</code></pre></td>
</tr>
</table>
<p>When hitting either the top or the bottom of the canvas, we negate the value of the angle (angle of incidence is equal to the angle of reflection). When hitting the left or right part of the canvas, we simply keep the input angle, since evaluating the score isn’t done here. To actually calculate the angle when a paddle is hit, we use yet another function.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 178)" onmouseover="showTip(event, 'fs45', 178)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs24', 179)" onmouseover="showTip(event, 'fs24', 179)" class="i">paddle</span> <span onmouseout="hideTip(event, 'fs44', 180)" onmouseover="showTip(event, 'fs44', 180)" class="i">hitRightPaddle</span> <span onmouseout="hideTip(event, 'fs46', 181)" onmouseover="showTip(event, 'fs46', 181)" class="f">determineAngle</span> <span onmouseout="hideTip(event, 'fs37', 182)" onmouseover="showTip(event, 'fs37', 182)" class="i">ball</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 183)" onmouseover="showTip(event, 'fs47', 183)" class="i">relativeIntersectY</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs24', 184)" onmouseover="showTip(event, 'fs24', 184)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 185)" onmouseover="showTip(event, 'fs9', 185)" class="i">y</span> <span class="o">+</span> (<span onmouseout="hideTip(event, 'fs24', 186)" onmouseover="showTip(event, 'fs24', 186)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 187)" onmouseover="showTip(event, 'fs11', 187)" class="i">height</span> <span class="o">/</span> <span class="n">2.</span>)) <span class="o">-</span> <span onmouseout="hideTip(event, 'fs37', 188)" onmouseover="showTip(event, 'fs37', 188)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 189)" onmouseover="showTip(event, 'fs13', 189)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 190)" onmouseover="showTip(event, 'fs9', 190)" class="i">y</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 191)" onmouseover="showTip(event, 'fs48', 191)" class="i">normalizedRelativeIntersectionY</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs47', 192)" onmouseover="showTip(event, 'fs47', 192)" class="i">relativeIntersectY</span> <span class="o">/</span> (<span onmouseout="hideTip(event, 'fs24', 193)" onmouseover="showTip(event, 'fs24', 193)" class="i">paddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 194)" onmouseover="showTip(event, 'fs11', 194)" class="i">height</span> <span class="o">/</span> <span class="n">2.</span>))
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs48', 195)" onmouseover="showTip(event, 'fs48', 195)" class="i">normalizedRelativeIntersectionY</span> <span class="o">=</span> <span class="n">0.</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs44', 196)" onmouseover="showTip(event, 'fs44', 196)" class="i">hitRightPaddle</span> <span class="k">then</span>
        <span onmouseout="hideTip(event, 'fs49', 197)" onmouseover="showTip(event, 'fs49', 197)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 198)" onmouseover="showTip(event, 'fs50', 198)" class="i">PI</span>
    <span class="k">else</span>
        <span onmouseout="hideTip(event, 'fs48', 199)" onmouseover="showTip(event, 'fs48', 199)" class="i">normalizedRelativeIntersectionY</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs46', 200)" onmouseover="showTip(event, 'fs46', 200)" class="f">determineAngle</span>
</code></pre></td>
</tr>
</table>
<p>For the calculation, we determine the relative intersection where the ball hit the paddle. Afterwards we normalize that value. So for example, if the paddle is 20 pixels high, that value will be between -10 and 10. Therefore we can dynamically calculate the angle depending on the impact. As seen in the collision function, the determineAngle parameter of this calculation-function is a function itself. Depending on which paddle is hit, we have to use a slightly modified calculation of the final angle. As you can see in line 5, we’ve also got a special case we have to deal with. If the right paddle got hit in the exact center, so normalizedRelativeIntersectionY = 0. &amp;&amp; hitRightPaddle, we will have to return Pi as the new angle, since the radiant value of Pi is equal to 180°.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 201)" onmouseover="showTip(event, 'fs51', 201)" class="f">collision</span> <span onmouseout="hideTip(event, 'fs35', 202)" onmouseover="showTip(event, 'fs35', 202)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 203)" onmouseover="showTip(event, 'fs36', 203)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 204)" onmouseover="showTip(event, 'fs37', 204)" class="i">ball</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs37', 205)" onmouseover="showTip(event, 'fs37', 205)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs34', 206)" onmouseover="showTip(event, 'fs34', 206)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs35', 207)" onmouseover="showTip(event, 'fs35', 207)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 208)" onmouseover="showTip(event, 'fs36', 208)" class="i">rightPaddle</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs27', 209)" onmouseover="showTip(event, 'fs27', 209)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs37', 210)" onmouseover="showTip(event, 'fs37', 210)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 211)" onmouseover="showTip(event, 'fs15', 211)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs28', 212)" onmouseover="showTip(event, 'fs28', 212)" class="p">Top</span> | <span onmouseout="hideTip(event, 'fs29', 213)" onmouseover="showTip(event, 'fs29', 213)" class="p">Bottom</span> <span class="k">-&gt;</span> <span class="o">-</span><span onmouseout="hideTip(event, 'fs37', 214)" onmouseover="showTip(event, 'fs37', 214)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 215)" onmouseover="showTip(event, 'fs15', 215)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs30', 216)" onmouseover="showTip(event, 'fs30', 216)" class="p">Left</span> | <span onmouseout="hideTip(event, 'fs31', 217)" onmouseover="showTip(event, 'fs31', 217)" class="p">Right</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs37', 218)" onmouseover="showTip(event, 'fs37', 218)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 219)" onmouseover="showTip(event, 'fs15', 219)" class="i">angle</span>
    | <span onmouseout="hideTip(event, 'fs32', 220)" onmouseover="showTip(event, 'fs32', 220)" class="p">LeftPaddle</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs37', 221)" onmouseover="showTip(event, 'fs37', 221)" class="i">ball</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs45', 222)" onmouseover="showTip(event, 'fs45', 222)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs35', 223)" onmouseover="showTip(event, 'fs35', 223)" class="i">leftPaddle</span> <span class="k">false</span>
                        (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs52', 224)" onmouseover="showTip(event, 'fs52', 224)" class="i">intersection</span> <span class="k">-&gt;</span>
                                <span onmouseout="hideTip(event, 'fs52', 225)" onmouseover="showTip(event, 'fs52', 225)" class="i">intersection</span> <span class="o">*</span> (<span class="n">5.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs49', 226)" onmouseover="showTip(event, 'fs49', 226)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 227)" onmouseover="showTip(event, 'fs50', 227)" class="i">PI</span> <span class="o">/</span> <span class="n">12.</span>))
    | <span onmouseout="hideTip(event, 'fs33', 228)" onmouseover="showTip(event, 'fs33', 228)" class="p">RightPaddle</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs37', 229)" onmouseover="showTip(event, 'fs37', 229)" class="i">ball</span>
                    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs45', 230)" onmouseover="showTip(event, 'fs45', 230)" class="f">calculateAngle</span> <span onmouseout="hideTip(event, 'fs36', 231)" onmouseover="showTip(event, 'fs36', 231)" class="i">rightPaddle</span> <span class="k">true</span>
                        (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs52', 232)" onmouseover="showTip(event, 'fs52', 232)" class="i">intersection</span> <span class="k">-&gt;</span>
                                <span onmouseout="hideTip(event, 'fs49', 233)" onmouseover="showTip(event, 'fs49', 233)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 234)" onmouseover="showTip(event, 'fs50', 234)" class="i">PI</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs52', 235)" onmouseover="showTip(event, 'fs52', 235)" class="i">intersection</span> <span class="o">*</span> (<span class="n">5.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs49', 236)" onmouseover="showTip(event, 'fs49', 236)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 237)" onmouseover="showTip(event, 'fs50', 237)" class="i">PI</span> <span class="o">/</span> <span class="n">12.</span>))

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 238)" onmouseover="showTip(event, 'fs53', 238)" class="f">moveBall</span> <span onmouseout="hideTip(event, 'fs54', 239)" onmouseover="showTip(event, 'fs54', 239)" class="i">angle</span> <span onmouseout="hideTip(event, 'fs37', 240)" onmouseover="showTip(event, 'fs37', 240)" class="i">ball</span> <span class="o">=</span> {
    <span class="i">element</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs7', 241)" onmouseover="showTip(event, 'fs7', 241)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 242)" onmouseover="showTip(event, 'fs37', 242)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 243)" onmouseover="showTip(event, 'fs13', 243)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 244)" onmouseover="showTip(event, 'fs7', 244)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 245)" onmouseover="showTip(event, 'fs37', 245)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 246)" onmouseover="showTip(event, 'fs14', 246)" class="i">speed</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs55', 247)" onmouseover="showTip(event, 'fs55', 247)" class="f">cos</span> <span onmouseout="hideTip(event, 'fs54', 248)" onmouseover="showTip(event, 'fs54', 248)" class="i">angle</span>;
                <span onmouseout="hideTip(event, 'fs9', 249)" onmouseover="showTip(event, 'fs9', 249)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 250)" onmouseover="showTip(event, 'fs37', 250)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 251)" onmouseover="showTip(event, 'fs13', 251)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 252)" onmouseover="showTip(event, 'fs9', 252)" class="i">y</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 253)" onmouseover="showTip(event, 'fs37', 253)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 254)" onmouseover="showTip(event, 'fs14', 254)" class="i">speed</span> <span class="o">*</span> <span class="o">-</span><span onmouseout="hideTip(event, 'fs56', 255)" onmouseover="showTip(event, 'fs56', 255)" class="f">sin</span> <span onmouseout="hideTip(event, 'fs54', 256)" onmouseover="showTip(event, 'fs54', 256)" class="i">angle</span>;
                <span class="i">width</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 257)" onmouseover="showTip(event, 'fs37', 257)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 258)" onmouseover="showTip(event, 'fs13', 258)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 259)" onmouseover="showTip(event, 'fs10', 259)" class="i">width</span>;
                <span class="i">height</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 260)" onmouseover="showTip(event, 'fs37', 260)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 261)" onmouseover="showTip(event, 'fs13', 261)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 262)" onmouseover="showTip(event, 'fs11', 262)" class="i">height</span> };
    <span class="i">speed</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 263)" onmouseover="showTip(event, 'fs37', 263)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 264)" onmouseover="showTip(event, 'fs14', 264)" class="i">speed</span> <span class="o">+</span> <span class="n">0.005</span>;
    <span onmouseout="hideTip(event, 'fs54', 265)" onmouseover="showTip(event, 'fs54', 265)" class="i">angle</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 266)" onmouseover="showTip(event, 'fs54', 266)" class="i">angle</span>;
}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 267)" onmouseover="showTip(event, 'fs57', 267)" class="f">checkGameStatus</span> <span onmouseout="hideTip(event, 'fs35', 268)" onmouseover="showTip(event, 'fs35', 268)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 269)" onmouseover="showTip(event, 'fs36', 269)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 270)" onmouseover="showTip(event, 'fs37', 270)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs58', 271)" onmouseover="showTip(event, 'fs58', 271)" class="i">gameStatus</span> <span class="o">=</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs37', 272)" onmouseover="showTip(event, 'fs37', 272)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs34', 273)" onmouseover="showTip(event, 'fs34', 273)" class="f">checkCollision</span> <span onmouseout="hideTip(event, 'fs35', 274)" onmouseover="showTip(event, 'fs35', 274)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 275)" onmouseover="showTip(event, 'fs36', 275)" class="i">rightPaddle</span> <span class="k">with</span>
    | <span onmouseout="hideTip(event, 'fs30', 276)" onmouseover="showTip(event, 'fs30', 276)" class="p">Left</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs58', 277)" onmouseover="showTip(event, 'fs58', 277)" class="i">gameStatus</span> <span class="k">with</span> <span class="i">scoreRight</span>
                                    <span class="o">=</span> <span onmouseout="hideTip(event, 'fs58', 278)" onmouseover="showTip(event, 'fs58', 278)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 279)" onmouseover="showTip(event, 'fs19', 279)" class="i">scoreRight</span> <span class="o">+</span> <span class="n">1</span>; <span class="i">active</span> <span class="o">=</span> <span class="k">false</span> }
    | <span onmouseout="hideTip(event, 'fs31', 280)" onmouseover="showTip(event, 'fs31', 280)" class="p">Right</span> <span class="k">-&gt;</span> { <span onmouseout="hideTip(event, 'fs58', 281)" onmouseover="showTip(event, 'fs58', 281)" class="i">gameStatus</span> <span class="k">with</span> <span class="i">scoreLeft</span>
                                    <span class="o">=</span> <span onmouseout="hideTip(event, 'fs58', 282)" onmouseover="showTip(event, 'fs58', 282)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 283)" onmouseover="showTip(event, 'fs17', 283)" class="i">scoreLeft</span> <span class="o">+</span> <span class="n">1</span>; <span class="i">active</span> <span class="o">=</span> <span class="k">false</span> }
    | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs58', 284)" onmouseover="showTip(event, 'fs58', 284)" class="i">gameStatus</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Game-loop-and-rendering" class="anchor" href="#Game-loop-and-rendering">Game loop and rendering</a></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 285)" onmouseover="showTip(event, 'fs59', 285)" class="f">render</span> (<span onmouseout="hideTip(event, 'fs60', 286)" onmouseover="showTip(event, 'fs60', 286)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs61', 287)" onmouseover="showTip(event, 'fs61', 287)" class="i">h</span>) <span onmouseout="hideTip(event, 'fs35', 288)" onmouseover="showTip(event, 'fs35', 288)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 289)" onmouseover="showTip(event, 'fs36', 289)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 290)" onmouseover="showTip(event, 'fs37', 290)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs58', 291)" onmouseover="showTip(event, 'fs58', 291)" class="i">gameStatus</span>  <span class="o">=</span>
    (<span class="n">0.</span>, <span class="n">0.</span>, <span onmouseout="hideTip(event, 'fs60', 292)" onmouseover="showTip(event, 'fs60', 292)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs61', 293)" onmouseover="showTip(event, 'fs61', 293)" class="i">h</span>) <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawRect</span>(<span class="s">&quot;black&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs35', 294)" onmouseover="showTip(event, 'fs35', 294)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 295)" onmouseover="showTip(event, 'fs7', 295)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs35', 296)" onmouseover="showTip(event, 'fs35', 296)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 297)" onmouseover="showTip(event, 'fs9', 297)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs35', 298)" onmouseover="showTip(event, 'fs35', 298)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 299)" onmouseover="showTip(event, 'fs10', 299)" class="i">width</span>, <span onmouseout="hideTip(event, 'fs35', 300)" onmouseover="showTip(event, 'fs35', 300)" class="i">leftPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 301)" onmouseover="showTip(event, 'fs11', 301)" class="i">height</span>)
    <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawRect</span>(<span class="s">&quot;white&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs36', 302)" onmouseover="showTip(event, 'fs36', 302)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 303)" onmouseover="showTip(event, 'fs7', 303)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs36', 304)" onmouseover="showTip(event, 'fs36', 304)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 305)" onmouseover="showTip(event, 'fs9', 305)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs36', 306)" onmouseover="showTip(event, 'fs36', 306)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 307)" onmouseover="showTip(event, 'fs10', 307)" class="i">width</span>, <span onmouseout="hideTip(event, 'fs36', 308)" onmouseover="showTip(event, 'fs36', 308)" class="i">rightPaddle</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 309)" onmouseover="showTip(event, 'fs11', 309)" class="i">height</span>)
    <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawRect</span>(<span class="s">&quot;white&quot;</span>)
    (<span onmouseout="hideTip(event, 'fs60', 310)" onmouseover="showTip(event, 'fs60', 310)" class="i">w</span> <span class="o">/</span> <span class="n">4.</span>, <span class="n">40.</span>) <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawText</span> (<span onmouseout="hideTip(event, 'fs62', 311)" onmouseover="showTip(event, 'fs62', 311)" class="i">string</span>(<span onmouseout="hideTip(event, 'fs58', 312)" onmouseover="showTip(event, 'fs58', 312)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 313)" onmouseover="showTip(event, 'fs17', 313)" class="i">scoreLeft</span>))
        <span class="s">&quot;white&quot;</span> <span class="s">&quot;30px Arial&quot;</span>
    (<span onmouseout="hideTip(event, 'fs60', 314)" onmouseover="showTip(event, 'fs60', 314)" class="i">w</span> <span class="o">/</span> <span class="n">1.25</span> <span class="o">-</span> <span class="n">30.</span>, <span class="n">40.</span>) <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawText</span> (<span onmouseout="hideTip(event, 'fs62', 315)" onmouseover="showTip(event, 'fs62', 315)" class="i">string</span>(<span onmouseout="hideTip(event, 'fs58', 316)" onmouseover="showTip(event, 'fs58', 316)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 317)" onmouseover="showTip(event, 'fs19', 317)" class="i">scoreRight</span>))
        <span class="s">&quot;white&quot;</span> <span class="s">&quot;30px Arial&quot;</span>
    (<span onmouseout="hideTip(event, 'fs37', 318)" onmouseover="showTip(event, 'fs37', 318)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 319)" onmouseover="showTip(event, 'fs13', 319)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 320)" onmouseover="showTip(event, 'fs7', 320)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs37', 321)" onmouseover="showTip(event, 'fs37', 321)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 322)" onmouseover="showTip(event, 'fs13', 322)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 323)" onmouseover="showTip(event, 'fs9', 323)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs37', 324)" onmouseover="showTip(event, 'fs37', 324)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 325)" onmouseover="showTip(event, 'fs13', 325)" class="i">element</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 326)" onmouseover="showTip(event, 'fs10', 326)" class="i">width</span>, <span class="n">0.</span>, <span class="n">2.</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs49', 327)" onmouseover="showTip(event, 'fs49', 327)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 328)" onmouseover="showTip(event, 'fs50', 328)" class="i">PI</span>)
    <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawCircle</span>(<span class="s">&quot;yellow&quot;</span>)
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs58', 329)" onmouseover="showTip(event, 'fs58', 329)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 330)" onmouseover="showTip(event, 'fs20', 330)" class="i">active</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs41', 331)" onmouseover="showTip(event, 'fs41', 331)" class="f">not</span> <span class="k">then</span>
        (<span onmouseout="hideTip(event, 'fs60', 332)" onmouseover="showTip(event, 'fs60', 332)" class="i">w</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">230.</span>, <span onmouseout="hideTip(event, 'fs61', 333)" onmouseover="showTip(event, 'fs61', 333)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">+</span> <span class="n">40.</span>)
        <span class="o">|&gt;</span> <span class="i">Win</span><span class="o">.</span><span class="i">drawText</span> <span class="s">&quot;Press &#39;r&#39; to start&quot;</span> <span class="s">&quot;green&quot;</span> <span class="s">&quot;40px Lucida Console&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs63', 334)" onmouseover="showTip(event, 'fs63', 334)" class="i">initialLeftPaddle</span> <span class="o">=</span>
    { <span onmouseout="hideTip(event, 'fs7', 335)" onmouseover="showTip(event, 'fs7', 335)" class="i">x</span> <span class="o">=</span> <span class="n">10.</span>; <span onmouseout="hideTip(event, 'fs9', 336)" onmouseover="showTip(event, 'fs9', 336)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 337)" onmouseover="showTip(event, 'fs5', 337)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">70.</span> <span class="o">/</span> <span class="n">2.</span>; <span class="i">width</span> <span class="o">=</span> <span class="n">15.</span>; <span class="i">height</span> <span class="o">=</span> <span class="n">70.</span> }
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs64', 338)" onmouseover="showTip(event, 'fs64', 338)" class="i">initialRightPaddle</span> <span class="o">=</span>
    { <span onmouseout="hideTip(event, 'fs7', 339)" onmouseover="showTip(event, 'fs7', 339)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 340)" onmouseover="showTip(event, 'fs4', 340)" class="i">w</span> <span class="o">-</span> <span class="n">15.</span> <span class="o">-</span> <span class="n">10.</span>; <span onmouseout="hideTip(event, 'fs9', 341)" onmouseover="showTip(event, 'fs9', 341)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 342)" onmouseover="showTip(event, 'fs5', 342)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span> <span class="o">-</span> <span class="n">70.</span> <span class="o">/</span> <span class="n">2.</span>; <span class="i">width</span> <span class="o">=</span> <span class="n">15.</span>; <span class="i">height</span> <span class="o">=</span> <span class="n">70.</span> }
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 343)" onmouseover="showTip(event, 'fs65', 343)" class="i">initialBall</span> <span class="o">=</span>
    { <span class="i">element</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs7', 344)" onmouseover="showTip(event, 'fs7', 344)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 345)" onmouseover="showTip(event, 'fs4', 345)" class="i">w</span> <span class="o">/</span> <span class="n">2.</span>; <span onmouseout="hideTip(event, 'fs9', 346)" onmouseover="showTip(event, 'fs9', 346)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 347)" onmouseover="showTip(event, 'fs5', 347)" class="i">h</span> <span class="o">/</span> <span class="n">2.</span>; <span class="i">width</span> <span class="o">=</span> <span class="n">5.</span>; <span class="i">height</span> <span class="o">=</span> <span class="n">5.</span> };
    <span class="i">speed</span> <span class="o">=</span> <span class="n">3.</span>;
    <span class="i">angle</span> <span class="o">=</span> <span class="n">0.</span> }

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs66', 348)" onmouseover="showTip(event, 'fs66', 348)" class="i">initialGameStatus</span> <span class="o">=</span> { <span class="i">scoreLeft</span> <span class="o">=</span> <span class="n">0</span>; <span class="i">scoreRight</span> <span class="o">=</span> <span class="n">0</span>; <span class="i">active</span> <span class="o">=</span> <span class="k">false</span>; }

<span class="i">Keyboard</span><span class="o">.</span><span class="i">init</span>()

<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs67', 349)" onmouseover="showTip(event, 'fs67', 349)" class="f">update</span> <span onmouseout="hideTip(event, 'fs35', 350)" onmouseover="showTip(event, 'fs35', 350)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 351)" onmouseover="showTip(event, 'fs36', 351)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 352)" onmouseover="showTip(event, 'fs37', 352)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs58', 353)" onmouseover="showTip(event, 'fs58', 353)" class="i">gameStatus</span> () <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 354)" onmouseover="showTip(event, 'fs35', 354)" class="i">leftPaddle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs58', 355)" onmouseover="showTip(event, 'fs58', 355)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 356)" onmouseover="showTip(event, 'fs20', 356)" class="i">active</span> <span class="k">then</span>
                        <span onmouseout="hideTip(event, 'fs35', 357)" onmouseover="showTip(event, 'fs35', 357)" class="i">leftPaddle</span>
                        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs25', 358)" onmouseover="showTip(event, 'fs25', 358)" class="f">move</span> (<span class="i">Keyboard</span><span class="o">.</span><span class="i">leftControlsPressed</span>())
                     <span class="k">else</span> <span onmouseout="hideTip(event, 'fs63', 359)" onmouseover="showTip(event, 'fs63', 359)" class="i">initialLeftPaddle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 360)" onmouseover="showTip(event, 'fs36', 360)" class="i">rightPaddle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs58', 361)" onmouseover="showTip(event, 'fs58', 361)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 362)" onmouseover="showTip(event, 'fs20', 362)" class="i">active</span> <span class="k">then</span>
                        <span onmouseout="hideTip(event, 'fs36', 363)" onmouseover="showTip(event, 'fs36', 363)" class="i">rightPaddle</span>
                        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs25', 364)" onmouseover="showTip(event, 'fs25', 364)" class="f">move</span> (<span class="i">Keyboard</span><span class="o">.</span><span class="i">rightControlsPressed</span>())
                      <span class="k">else</span> <span onmouseout="hideTip(event, 'fs64', 365)" onmouseover="showTip(event, 'fs64', 365)" class="i">initialRightPaddle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 366)" onmouseover="showTip(event, 'fs54', 366)" class="i">angle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs58', 367)" onmouseover="showTip(event, 'fs58', 367)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 368)" onmouseover="showTip(event, 'fs20', 368)" class="i">active</span> <span class="k">then</span>
                    <span onmouseout="hideTip(event, 'fs51', 369)" onmouseover="showTip(event, 'fs51', 369)" class="f">collision</span> <span onmouseout="hideTip(event, 'fs35', 370)" onmouseover="showTip(event, 'fs35', 370)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 371)" onmouseover="showTip(event, 'fs36', 371)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 372)" onmouseover="showTip(event, 'fs37', 372)" class="i">ball</span>
                <span class="k">else</span> <span onmouseout="hideTip(event, 'fs37', 373)" onmouseover="showTip(event, 'fs37', 373)" class="i">ball</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 374)" onmouseover="showTip(event, 'fs15', 374)" class="i">angle</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 375)" onmouseover="showTip(event, 'fs37', 375)" class="i">ball</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs58', 376)" onmouseover="showTip(event, 'fs58', 376)" class="i">gameStatus</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 377)" onmouseover="showTip(event, 'fs20', 377)" class="i">active</span> <span class="k">then</span>
                    <span onmouseout="hideTip(event, 'fs37', 378)" onmouseover="showTip(event, 'fs37', 378)" class="i">ball</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 379)" onmouseover="showTip(event, 'fs53', 379)" class="f">moveBall</span> <span onmouseout="hideTip(event, 'fs54', 380)" onmouseover="showTip(event, 'fs54', 380)" class="i">angle</span>
               <span class="k">else</span>
                   { <span onmouseout="hideTip(event, 'fs65', 381)" onmouseover="showTip(event, 'fs65', 381)" class="i">initialBall</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs54', 382)" onmouseover="showTip(event, 'fs54', 382)" class="i">angle</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs54', 383)" onmouseover="showTip(event, 'fs54', 383)" class="i">angle</span> <span class="o">=</span> <span class="n">0.</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs49', 384)" onmouseover="showTip(event, 'fs49', 384)" class="t">Math</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 385)" onmouseover="showTip(event, 'fs50', 385)" class="i">PI</span> <span class="k">else</span> <span class="n">0.</span> }
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs58', 386)" onmouseover="showTip(event, 'fs58', 386)" class="i">gameStatus</span> <span class="o">=</span> <span class="k">if</span> <span class="i">Keyboard</span><span class="o">.</span><span class="i">rKeyPressed</span>() <span class="o">=</span> <span class="n">1</span> <span class="k">then</span>
                        { <span onmouseout="hideTip(event, 'fs58', 387)" onmouseover="showTip(event, 'fs58', 387)" class="i">gameStatus</span> <span class="k">with</span> <span class="i">active</span> <span class="o">=</span> <span class="k">true</span> }
                     <span class="k">else</span>
                        <span onmouseout="hideTip(event, 'fs58', 388)" onmouseover="showTip(event, 'fs58', 388)" class="i">gameStatus</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs57', 389)" onmouseover="showTip(event, 'fs57', 389)" class="f">checkGameStatus</span> <span onmouseout="hideTip(event, 'fs35', 390)" onmouseover="showTip(event, 'fs35', 390)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 391)" onmouseover="showTip(event, 'fs36', 391)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 392)" onmouseover="showTip(event, 'fs37', 392)" class="i">ball</span>
    <span onmouseout="hideTip(event, 'fs59', 393)" onmouseover="showTip(event, 'fs59', 393)" class="f">render</span> (<span onmouseout="hideTip(event, 'fs4', 394)" onmouseover="showTip(event, 'fs4', 394)" class="i">w</span>, <span onmouseout="hideTip(event, 'fs5', 395)" onmouseover="showTip(event, 'fs5', 395)" class="i">h</span>) <span onmouseout="hideTip(event, 'fs35', 396)" onmouseover="showTip(event, 'fs35', 396)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 397)" onmouseover="showTip(event, 'fs36', 397)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 398)" onmouseover="showTip(event, 'fs37', 398)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs58', 399)" onmouseover="showTip(event, 'fs58', 399)" class="i">gameStatus</span>
    <span class="i">window</span><span class="o">.</span><span class="i">setTimeout</span>(<span onmouseout="hideTip(event, 'fs67', 400)" onmouseover="showTip(event, 'fs67', 400)" class="i">update</span> <span onmouseout="hideTip(event, 'fs35', 401)" onmouseover="showTip(event, 'fs35', 401)" class="i">leftPaddle</span> <span onmouseout="hideTip(event, 'fs36', 402)" onmouseover="showTip(event, 'fs36', 402)" class="i">rightPaddle</span> <span onmouseout="hideTip(event, 'fs37', 403)" onmouseover="showTip(event, 'fs37', 403)" class="i">ball</span> <span onmouseout="hideTip(event, 'fs58', 404)" onmouseover="showTip(event, 'fs58', 404)" class="i">gameStatus</span>, <span class="n">1000.</span> <span class="o">/</span> <span class="n">60.</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs68', 405)" onmouseover="showTip(event, 'fs68', 405)" class="f">ignore</span>

<span onmouseout="hideTip(event, 'fs67', 406)" onmouseover="showTip(event, 'fs67', 406)" class="f">update</span> <span onmouseout="hideTip(event, 'fs63', 407)" onmouseover="showTip(event, 'fs63', 407)" class="i">initialLeftPaddle</span> <span onmouseout="hideTip(event, 'fs64', 408)" onmouseover="showTip(event, 'fs64', 408)" class="i">initialRightPaddle</span> <span onmouseout="hideTip(event, 'fs65', 409)" onmouseover="showTip(event, 'fs65', 409)" class="i">initialBall</span> <span onmouseout="hideTip(event, 'fs66', 410)" onmouseover="showTip(event, 'fs66', 410)" class="i">initialGameStatus</span> ()
</code></pre></td>
</tr>
</table>


<div class="tip" id="fs1">module Pong</div>
<div class="tip" id="fs2">namespace Microsoft.FSharp.Core</div>
<div class="tip" id="fs3">namespace System</div>
<div class="tip" id="fs4">val w : float<br /><br />Full name: Pong.w</div>
<div class="tip" id="fs5">val h : float<br /><br />Full name: Pong.h</div>
<div class="tip" id="fs6">type PongElement =<br />&#160;&#160;{x: float;<br />&#160;&#160;&#160;y: float;<br />&#160;&#160;&#160;width: float;<br />&#160;&#160;&#160;height: float;}<br /><br />Full name: Pong.PongElement</div>
<div class="tip" id="fs7">PongElement.x: float</div>
<div class="tip" id="fs8">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs9">PongElement.y: float</div>
<div class="tip" id="fs10">PongElement.width: float</div>
<div class="tip" id="fs11">PongElement.height: float</div>
<div class="tip" id="fs12">type BallElement =<br />&#160;&#160;{element: PongElement;<br />&#160;&#160;&#160;speed: float;<br />&#160;&#160;&#160;angle: float;}<br /><br />Full name: Pong.BallElement</div>
<div class="tip" id="fs13">BallElement.element: PongElement</div>
<div class="tip" id="fs14">BallElement.speed: float</div>
<div class="tip" id="fs15">BallElement.angle: float</div>
<div class="tip" id="fs16">type GameStatus =<br />&#160;&#160;{scoreLeft: int;<br />&#160;&#160;&#160;scoreRight: int;<br />&#160;&#160;&#160;active: bool;}<br /><br />Full name: Pong.GameStatus</div>
<div class="tip" id="fs17">GameStatus.scoreLeft: int</div>
<div class="tip" id="fs18">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs19">GameStatus.scoreRight: int</div>
<div class="tip" id="fs20">GameStatus.active: bool</div>
<div class="tip" id="fs21">type bool = Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs22">val canMove : int * int -&gt; paddle:PongElement -&gt; bool<br /><br />Full name: Pong.canMove</div>
<div class="tip" id="fs23">val direction : int * int</div>
<div class="tip" id="fs24">val paddle : PongElement</div>
<div class="tip" id="fs25">val move : int * int -&gt; paddle:PongElement -&gt; PongElement<br /><br />Full name: Pong.move</div>
<div class="tip" id="fs26">type Collision =<br />&#160;&#160;| None<br />&#160;&#160;| Top<br />&#160;&#160;| Bottom<br />&#160;&#160;| Left<br />&#160;&#160;| Right<br />&#160;&#160;| LeftPaddle<br />&#160;&#160;| RightPaddle<br /><br />Full name: Pong.Collision</div>
<div class="tip" id="fs27">union case Collision.None: Collision</div>
<div class="tip" id="fs28">union case Collision.Top: Collision</div>
<div class="tip" id="fs29">union case Collision.Bottom: Collision</div>
<div class="tip" id="fs30">union case Collision.Left: Collision</div>
<div class="tip" id="fs31">union case Collision.Right: Collision</div>
<div class="tip" id="fs32">union case Collision.LeftPaddle: Collision</div>
<div class="tip" id="fs33">union case Collision.RightPaddle: Collision</div>
<div class="tip" id="fs34">val checkCollision : leftPaddle:PongElement -&gt; rightPaddle:PongElement -&gt; ball:BallElement -&gt; Collision<br /><br />Full name: Pong.checkCollision</div>
<div class="tip" id="fs35">val leftPaddle : PongElement</div>
<div class="tip" id="fs36">val rightPaddle : PongElement</div>
<div class="tip" id="fs37">val ball : BallElement</div>
<div class="tip" id="fs38">val hitTop : bool</div>
<div class="tip" id="fs39">val hitBottom : bool</div>
<div class="tip" id="fs40">val hitLeft : bool</div>
<div class="tip" id="fs41">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs42">val hitRight : bool</div>
<div class="tip" id="fs43">val hitLeftPaddle : bool</div>
<div class="tip" id="fs44">val hitRightPaddle : bool</div>
<div class="tip" id="fs45">val calculateAngle : paddle:PongElement -&gt; hitRightPaddle:bool -&gt; determineAngle:(float -&gt; float) -&gt; ball:BallElement -&gt; float<br /><br />Full name: Pong.calculateAngle</div>
<div class="tip" id="fs46">val determineAngle : (float -&gt; float)</div>
<div class="tip" id="fs47">val relativeIntersectY : float</div>
<div class="tip" id="fs48">val normalizedRelativeIntersectionY : float</div>
<div class="tip" id="fs49">type Math =<br />&#160;&#160;static val PI : float<br />&#160;&#160;static val E : float<br />&#160;&#160;static member Abs : value:sbyte -&gt; sbyte + 6 overloads<br />&#160;&#160;static member Acos : d:float -&gt; float<br />&#160;&#160;static member Asin : d:float -&gt; float<br />&#160;&#160;static member Atan : d:float -&gt; float<br />&#160;&#160;static member Atan2 : y:float * x:float -&gt; float<br />&#160;&#160;static member BigMul : a:int * b:int -&gt; int64<br />&#160;&#160;static member Ceiling : d:decimal -&gt; decimal + 1 overload<br />&#160;&#160;static member Cos : d:float -&gt; float<br />&#160;&#160;...<br /><br />Full name: System.Math</div>
<div class="tip" id="fs50">field Math.PI = 3.14159265359</div>
<div class="tip" id="fs51">val collision : leftPaddle:PongElement -&gt; rightPaddle:PongElement -&gt; ball:BallElement -&gt; float<br /><br />Full name: Pong.collision</div>
<div class="tip" id="fs52">val intersection : float</div>
<div class="tip" id="fs53">val moveBall : angle:float -&gt; ball:BallElement -&gt; BallElement<br /><br />Full name: Pong.moveBall</div>
<div class="tip" id="fs54">val angle : float</div>
<div class="tip" id="fs55">val cos : value:&#39;T -&gt; &#39;T (requires member Cos)<br /><br />Full name: Microsoft.FSharp.Core.Operators.cos</div>
<div class="tip" id="fs56">val sin : value:&#39;T -&gt; &#39;T (requires member Sin)<br /><br />Full name: Microsoft.FSharp.Core.Operators.sin</div>
<div class="tip" id="fs57">val checkGameStatus : leftPaddle:PongElement -&gt; rightPaddle:PongElement -&gt; ball:BallElement -&gt; gameStatus:GameStatus -&gt; GameStatus<br /><br />Full name: Pong.checkGameStatus</div>
<div class="tip" id="fs58">val gameStatus : GameStatus</div>
<div class="tip" id="fs59">val render : w:float * h:float -&gt; leftPaddle:PongElement -&gt; rightPaddle:PongElement -&gt; ball:BallElement -&gt; gameStatus:GameStatus -&gt; unit<br /><br />Full name: Pong.render</div>
<div class="tip" id="fs60">val w : float</div>
<div class="tip" id="fs61">val h : float</div>
<div class="tip" id="fs62">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs63">val initialLeftPaddle : PongElement<br /><br />Full name: Pong.initialLeftPaddle</div>
<div class="tip" id="fs64">val initialRightPaddle : PongElement<br /><br />Full name: Pong.initialRightPaddle</div>
<div class="tip" id="fs65">val initialBall : BallElement<br /><br />Full name: Pong.initialBall</div>
<div class="tip" id="fs66">val initialGameStatus : GameStatus<br /><br />Full name: Pong.initialGameStatus</div>
<div class="tip" id="fs67">val update : leftPaddle:PongElement -&gt; rightPaddle:PongElement -&gt; ball:BallElement -&gt; gameStatus:GameStatus -&gt; unit -&gt; unit<br /><br />Full name: Pong.update</div>
<div class="tip" id="fs68">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>

    </div>
    <div class="col-md-1 col-lg-2"></div>
  </div>
</div>

  </div>

  <a class="gh-forkme" href="https://github.com/fable-compiler/Fable"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
</body>
</html>
