<!doctype html>
<html>

<head>
  <title>Fable FAQ</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,300,600,700|Roboto+Mono">
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/bulma.custom.css">
  <link rel="stylesheet" type="text/css" href="/css/highlight.css">
  <link rel="shortcut icon" href="/img/shared/fable.ico" />
  <script src="https://cdn.polyfill.io/v2/polyfill.js?features=default,fetch"></script>
</head>

<body>
  <nav class="navbar"><div class="navbar-brand"><div class="navbar-item title is-4">Fable</div><div class="navbar-burger" data-target="navMenu"><span></span><span></span><span></span></div></div><div id="navMenu" class=" navbar-menu"><div class="navbar-start"><a class=" navbar-item" href="/">Home</a><a class=" navbar-item" href="/repl2">REPL</a><a class=" navbar-item" href="/blog">Blog</a><a class=" navbar-item" href="/docs">Docs</a><a class=" navbar-item is-active" href="/faq">FAQ</a><a class=" navbar-item" href="/fableconf">FableConf</a></div><div class="navbar-end"><div class="navbar-item"><div class="field is-grouped"><div class="control"><a class="button twitter" href="https://twitter.com/FableCompiler"><span class="icon"><i class="fa fa-twitter"></i></span><span>Share the love!</span></a></div><div class="control"><a class="button github" href="https://gitter.im/fable-compiler/Fable"><span class="icon"><i class="fa fa-comments"></i></span><span>Chat</span></a></div><div class="control"><a class="button github" href="https://github.com/fable-compiler/Fable"><span class="icon"><i class="fa fa-github"></i></span><span>Contribute</span></a></div></div></div></div></div></nav>
  <div class="markdown faq" style="overflow:hidden"><section class="hero fable-header"><div class="hero-body"><div class="container"><div class="columns is-vcentered"><div class="column"><img class="fable-logo" src="/img/shared/fable_logo.png"/></div><div class="column    has-text-right        "><h1 class="title is-1">FAQ</h1><h1 class="subtitle is-4">The place to find a quick answer to your questions</h1></div></div></div></div></section><div style="margin-top:1.6rem"><div class="columns"><div class="column"></div><div class="column is-two-thirds"><div class="content" style="margin:5px"><h1><a name="faq" class="anchor" href="#faq">FAQ</a></h1><p>This is the section for quick questions or to miss the holes in the documentation. Check the first question below to learn how you can help make the FAQ a great resource for Fable users.</p>
<h2><a name="general" class="anchor" href="#general">General</a></h2><h4><a name="how-can-i-add-a-new-question-" class="anchor" href="#how-can-i-add-a-new-question-">How can I add a new question?</a></h4><p>Make sure the question is not answered already either here or in the documentation. Then just <a href="https://github.com/fable-compiler/Fable/edit/master/docs/FAQ.html">click here to edit this page in Github</a>, add your question to the bottom and create a PR. Maintainers will write an answer and ask you if that solves the issue. If it does, the PR will be merged and the question will be added to the page so it can be referenced by other users.</p>
<h2><a name="compiler" class="anchor" href="#compiler">Compiler</a></h2><h4><a name="can-i-use-type-providers-with-fable-" class="anchor" href="#can-i-use-type-providers-with-fable-">Can I use Type Providers with Fable?</a></h4><p>Erasure Type Providers compatible with netstandard should be compatible with Fable, however they must generate code that doesn&#39;t call .NET APIs unsupported by Fable. At the time of writing there are no Type Providers designed for Fable available.</p>
<h4><a name="how-can-i-run-a-certain-piece-of-code-only-in-my-production-build-" class="anchor" href="#how-can-i-run-a-certain-piece-of-code-only-in-my-production-build-">How can I run a certain piece of code only in my production build?</a></h4><p>Using a <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/compiler-directives">Compiler Directive</a>.</p>
<pre><code class="language-fsharp">#<span class="hljs-keyword">if</span> !DEBUG
printfn <span class="hljs-string">"only printing in production bundle"</span>
#endif</code></pre>
<p>You can define compilation directives using the <code>define</code> option in your Fable client. Latest <a href="https://www.npmjs.com/package/fable-loader">fable-loader</a> will automatically define <code>DEBUG</code> when running Webpack in development mode.</p>
<h4><a name="how-are-numbers-compiled-to-js-" class="anchor" href="#how-are-numbers-compiled-to-js-">How are numbers compiled to JS?</a></h4><p>All numeric types including decimal become <code>JS number</code> (64-bit floating type), except for longs and big integers. Tom Clarke has documented in much more detail the differences in numeric types between .NET and JS, <a href="../docs/numbers.html">check it out</a>.</p>
<h2><a name="fable-core" class="anchor" href="#fable-core">Fable.Core</a></h2><h4><a name="which-operators-are-used-in-fable-core-" class="anchor" href="#which-operators-are-used-in-fable-core-">Which operators are used in Fable.Core?</a></h4><p>The <code>Fable.Core.JsInterop</code> module provides three main operators to interact with JS (all of them erased in generated JS code): <code>?</code> to dynamically access a property of an object, <code>!!</code> for unsafe casting (equivalent to <code>unbox</code>) and <code>!^</code> to pass arguments to a method accepting <a href="../docs/interacting.html#erase-attribute">Erased Unions</a>.</p>
<pre><code class="language-fsharp"><span class="hljs-keyword">open</span> Fable.Core.JsInterop

<span class="hljs-keyword">let</span> jqElement = Browser.window?jQuery
<span class="hljs-keyword">let</span> result: float = !!myObj?bar(<span class="hljs-number">5</span>)
myObject?aProperty &lt;- <span class="hljs-number">30</span>

<span class="hljs-keyword">let</span> myMethod (arg: U3&lt;string, int, Test&gt;) = ...
myMethod !^<span class="hljs-number">5</span> <span class="hljs-comment">// Same as: myMethod (U3.Case2 5)</span></code></pre>
<h4><a name="how-can-i-create-a-js-object-" class="anchor" href="#how-can-i-create-a-js-object-">How can I create a JS object?</a></h4><p>The <code>Fable.Core.JsInterop</code> module provides three helpers to create JS object. The first one, <code>createObj</code>, is used to dynamically create a JS object with string keys:</p>
<pre><code class="language-fsharp"><span class="hljs-keyword">open</span> Fable.Core.JsInterop

<span class="hljs-comment">// { a: 5, b: aValue }</span>
createObj [
    <span class="hljs-string">"a"</span> ==&gt; <span class="hljs-number">5</span>
    <span class="hljs-string">"b"</span> ==&gt; aValue
]</code></pre>
<p>If you have an interface definition for the JS object you can just use an <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/object-expressions">F# Object Expression</a>. However, in many cases you only want to set a few fields, as when you pass options to a JS library, in those cases you can use <code>jsOptions</code> and a lambda to declare your object and have the compiler type-check the fields:</p>
<pre><code class="language-fsharp"><span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">IFoo</span> </span>=
    <span class="hljs-keyword">abstract</span> foo: string <span class="hljs-keyword">with</span> get, set
    <span class="hljs-keyword">abstract</span> bar: int <span class="hljs-keyword">with</span> get, set
    <span class="hljs-keyword">abstract</span> optionalField: obj <span class="hljs-keyword">with</span> get, set

<span class="hljs-keyword">let</span> myJsApi (options: IFoo) = importMember <span class="hljs-string">"foo-module"</span>

<span class="hljs-comment">// JS: { foo: "foo", bar: 5 }</span>
myJsApi (jsOptions(<span class="hljs-keyword">fun</span> (o: IFoo) -&gt;
    o.foo &lt;- <span class="hljs-string">"foo"</span>
    o.bar &lt;- <span class="hljs-number">5</span>
))</code></pre>
<p>If you use these helpers multiple times, you may want to define custom prefix operators for a terser syntax. For example:</p>
<pre><code class="language-fsharp"><span class="hljs-keyword">let</span> <span class="hljs-keyword">inline</span> (~%) x = createObj x
<span class="hljs-keyword">let</span> <span class="hljs-keyword">inline</span> (~%%) x = jsOptions x

anotherJsApi %[<span class="hljs-string">"bar"</span> ==&gt; <span class="hljs-number">10</span>]
myJsApi %%(<span class="hljs-keyword">fun</span> o -&gt; o.foo &lt;- <span class="hljs-string">"foo"</span>)</code></pre>
<p>Finally, some libraries (like React bindings) use F# unions to represent fields of JS objects. In those cases you can use <code>keyValueList</code> to transform a list of union cases to a JS object.</p>
<pre><code class="language-fsharp"><span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">MyOptions</span> </span>=
    | Foo <span class="hljs-keyword">of</span> string
    | Bar <span class="hljs-keyword">of</span> int

<span class="hljs-comment">// JS: { foo: "foo", bar: 5 }</span>
<span class="hljs-comment">// Note we use the caseRules argument to change the first letter</span>
keyValueList CaseRules.LowerFirst [
    Foo <span class="hljs-string">"foo"</span>
    Bar <span class="hljs-number">5</span>
]</code></pre>
<h2><a name="library-authors" class="anchor" href="#library-authors">Library authors</a></h2><h4><a name="which-files-need-to-be-included-in-the-nuget-package-" class="anchor" href="#which-files-need-to-be-included-in-the-nuget-package-">Which files need to be included in the nuget package?</a></h4><p>The F# source code and the F# project file have to be included in the Nuget Package in a folder named <code>fable</code> within the package. This may sound complicated but it&#39;s only a matter of adding a couple of lines to your project file and let the <code>dotnet pack</code> command do all the rest.</p>
<pre><code class="language-xml"><span class="hljs-comment">&lt;!-- Add source files to "fable" folder in Nuget package --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"*.fsproj; **\*.fs"</span> <span class="hljs-attr">PackagePath</span>=<span class="hljs-string">"fable\"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span></code></pre>
<p>Possible cryptic error message when you don&#39;t include the project file and/or source files is <code>Cannot find root module</code>.</p>
</div></div><div class="column"></div></div></div></div>
  <footer>
      <p> Fable <a href="https://github.com/fable-compiler/Fable">source code</a> is licensed <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.</p>
  </footer>
  <script>
    // Activate navbar burget button
    document.addEventListener('DOMContentLoaded', function () {
      var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
      if ($navbarBurgers.length > 0) {
        $navbarBurgers.forEach(function ($el) {
          $el.addEventListener('click', function () {
            var target = $el.dataset.target;
            var $target = document.getElementById(target);
            $el.classList.toggle('is-active');
            $target.classList.toggle('is-active');
          });
        });
      }
    });
  </script>
</body>

</html>
